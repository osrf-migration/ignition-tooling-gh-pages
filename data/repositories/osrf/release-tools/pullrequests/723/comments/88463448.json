{"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/88463448.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-88463448"}}, "parent": {"id": 87835202, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/87835202.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-87835202"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}, "content": {"raw": "Yes, the idea of running [apt-get install again ](#!/osrf/release-tools/pull-requests/723/docker_generate_dockerfilebash-run-apt-get/diff#Ljenkins-scripts/docker/lib/docker_generate_dockerfile.bashF260T261)after invalidating the cache on every run was to update the packages in the cache but it is right that it does not cover all and we will need to list every single package which makes less sense to me. In apt we have `upgrade` \\(to update all packages installed but no remove or add new packages if that is needed to complete the upgrade\\) or `dist-upgrade` which do the same as `upgrade` but can remove or add new packages if that is needed to complete the dependency chain. I think that we can use `dist-upgrade`inside the containers without too much risk.\n\nIf we go with the upgrade then I can not see a reason too keep the command `apt-get install -y ${PACKAGES_CACHE_AND_CHECK_UPDATES}` just after.", "markup": "markdown", "html": "<p>Yes, the idea of running <a data-is-external-link=\"true\" href=\"#!/osrf/release-tools/pull-requests/723/docker_generate_dockerfilebash-run-apt-get/diff#Ljenkins-scripts/docker/lib/docker_generate_dockerfile.bashF260T261\" rel=\"nofollow\">apt-get install again </a>after invalidating the cache on every run was to update the packages in the cache but it is right that it does not cover all and we will need to list every single package which makes less sense to me. In apt we have <code>upgrade</code> (to update all packages installed but no remove or add new packages if that is needed to complete the upgrade) or <code>dist-upgrade</code> which do the same as <code>upgrade</code> but can remove or add new packages if that is needed to complete the dependency chain. I think that we can use <code>dist-upgrade</code>inside the containers without too much risk.</p>\n<p>If we go with the upgrade then I can not see a reason too keep the command <code>apt-get install -y ${PACKAGES_CACHE_AND_CHECK_UPDATES}</code> just after.</p>", "type": "rendered"}, "created_on": "2019-01-17T18:56:21.057660+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2019-01-17T18:56:21.067978+00:00", "type": "pullrequest_comment", "id": 88463448}