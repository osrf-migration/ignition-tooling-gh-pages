{"pagelen": 50, "values": [{"update": {"description": "docker_generate_dockerfile.bash: run apt-get upgrade", "title": "docker_generate_dockerfile.bash: run apt-get upgrade", "destination": {"commit": {"hash": "ddb8468370b6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/ddb8468370b6.json"}, "html": {"href": "#!/osrf/release-tools/commits/ddb8468370b6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9aebd8d53e0a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/9aebd8d53e0a.json"}, "html": {"href": "#!/osrf/release-tools/commits/9aebd8d53e0a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "docker_apt_upgrade"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-01-17T23:35:52.252294+00:00"}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"approval": {"date": "2019-01-17T23:29:58.196056+00:00", "pullrequest": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/88488251.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-88488251"}}, "parent": {"id": 88465775, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/88465775.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-88465775"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}, "content": {"raw": "379 seems to be running fine. I think the changes are good.", "markup": "markdown", "html": "<p>379 seems to be running fine. I think the changes are good.</p>", "type": "rendered"}, "created_on": "2019-01-17T23:29:55.257306+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2019-01-17T23:29:55.266971+00:00", "type": "pullrequest_comment", "id": 88488251}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/88465775.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-88465775"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}, "content": {"raw": "testing with this gazebo default build that failed twice on ash due to an inconsistent dart dependency:\n\n* https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/379/\n* https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/378/\n* https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/377/", "markup": "markdown", "html": "<p>testing with this gazebo default build that failed twice on ash due to an inconsistent dart dependency:</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/379/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/379/</a></li>\n<li><a href=\"https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/378/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/378/</a></li>\n<li><a href=\"https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/377/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/377/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2019-01-17T19:18:35.476064+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-01-17T19:18:35.483869+00:00", "type": "pullrequest_comment", "id": 88465775}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"update": {"description": "docker_generate_dockerfile.bash: run apt-get upgrade", "title": "docker_generate_dockerfile.bash: run apt-get upgrade", "destination": {"commit": {"hash": "ddb8468370b6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/ddb8468370b6.json"}, "html": {"href": "#!/osrf/release-tools/commits/ddb8468370b6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9aebd8d53e0a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/9aebd8d53e0a.json"}, "html": {"href": "#!/osrf/release-tools/commits/9aebd8d53e0a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "docker_apt_upgrade"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-01-17T19:13:42.653168+00:00"}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/88465286.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-88465286"}}, "parent": {"id": 88463448, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/88463448.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-88463448"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}, "content": {"raw": "good point; switched to dist-upgrade in 6664985 and removed install line", "markup": "markdown", "html": "<p>good point; switched to dist-upgrade in <a href=\"#!/osrf/release-tools/commits/6664985\" rel=\"nofollow\" class=\"ap-connect-link\">6664985</a> and removed install line</p>", "type": "rendered"}, "created_on": "2019-01-17T19:13:38.711718+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-01-17T19:13:38.722376+00:00", "type": "pullrequest_comment", "id": 88465286}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"update": {"description": "docker_generate_dockerfile.bash: run apt-get upgrade", "title": "docker_generate_dockerfile.bash: run apt-get upgrade", "destination": {"commit": {"hash": "ddb8468370b6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/ddb8468370b6.json"}, "html": {"href": "#!/osrf/release-tools/commits/ddb8468370b6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9aebd8d53e0a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/9aebd8d53e0a.json"}, "html": {"href": "#!/osrf/release-tools/commits/9aebd8d53e0a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "docker_apt_upgrade"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-01-17T19:13:29.327876+00:00"}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"update": {"description": "docker_generate_dockerfile.bash: run apt-get upgrade", "title": "docker_generate_dockerfile.bash: run apt-get upgrade", "destination": {"commit": {"hash": "ddb8468370b6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/ddb8468370b6.json"}, "html": {"href": "#!/osrf/release-tools/commits/ddb8468370b6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "6664985b868b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/6664985b868b.json"}, "html": {"href": "#!/osrf/release-tools/commits/6664985b868b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "docker_apt_upgrade"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-01-17T19:12:30.386214+00:00"}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"update": {"description": "docker_generate_dockerfile.bash: run apt-get upgrade", "title": "docker_generate_dockerfile.bash: run apt-get upgrade", "destination": {"commit": {"hash": "ddb8468370b6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/ddb8468370b6.json"}, "html": {"href": "#!/osrf/release-tools/commits/ddb8468370b6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "6664985b868b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/6664985b868b.json"}, "html": {"href": "#!/osrf/release-tools/commits/6664985b868b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "docker_apt_upgrade"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-01-17T19:12:27.658412+00:00"}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/88463448.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-88463448"}}, "parent": {"id": 87835202, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/87835202.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-87835202"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}, "content": {"raw": "Yes, the idea of running [apt-get install again ](#!/osrf/release-tools/pull-requests/723/docker_generate_dockerfilebash-run-apt-get/diff#Ljenkins-scripts/docker/lib/docker_generate_dockerfile.bashF260T261)after invalidating the cache on every run was to update the packages in the cache but it is right that it does not cover all and we will need to list every single package which makes less sense to me. In apt we have `upgrade` \\(to update all packages installed but no remove or add new packages if that is needed to complete the upgrade\\) or `dist-upgrade` which do the same as `upgrade` but can remove or add new packages if that is needed to complete the dependency chain. I think that we can use `dist-upgrade`inside the containers without too much risk.\n\nIf we go with the upgrade then I can not see a reason too keep the command `apt-get install -y ${PACKAGES_CACHE_AND_CHECK_UPDATES}` just after.", "markup": "markdown", "html": "<p>Yes, the idea of running <a data-is-external-link=\"true\" href=\"#!/osrf/release-tools/pull-requests/723/docker_generate_dockerfilebash-run-apt-get/diff#Ljenkins-scripts/docker/lib/docker_generate_dockerfile.bashF260T261\" rel=\"nofollow\">apt-get install again </a>after invalidating the cache on every run was to update the packages in the cache but it is right that it does not cover all and we will need to list every single package which makes less sense to me. In apt we have <code>upgrade</code> (to update all packages installed but no remove or add new packages if that is needed to complete the upgrade) or <code>dist-upgrade</code> which do the same as <code>upgrade</code> but can remove or add new packages if that is needed to complete the dependency chain. I think that we can use <code>dist-upgrade</code>inside the containers without too much risk.</p>\n<p>If we go with the upgrade then I can not see a reason too keep the command <code>apt-get install -y ${PACKAGES_CACHE_AND_CHECK_UPDATES}</code> just after.</p>", "type": "rendered"}, "created_on": "2019-01-17T18:56:21.057660+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2019-01-17T18:56:21.067978+00:00", "type": "pullrequest_comment", "id": 88463448}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723/comments/87835202.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723/_/diff#comment-87835202"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}, "content": {"raw": "This may cause performance problems, but I have seen builds fail that pass after invalidating the cache:\n\nThis gazebo build was run after the recent dart 6.7 release. The build script only upgrades `libdart6-utils-urdf-dev`, while `libdart6-dev` is still the old version, which causes configuration to fail.\n\n* [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-default-xenial-amd64-gpu-none&build=372)](https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/372/) https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/372/\n\nI reran the build with an invalidated cache, and it succeeded:\n\n* [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-default-xenial-amd64-gpu-none&build=373)](https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/373/) https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/373/\n\nI suppose an alternative is to list more dart6 packages in the dependency list?", "markup": "markdown", "html": "<p>This may cause performance problems, but I have seen builds fail that pass after invalidating the cache:</p>\n<p>This gazebo build was run after the recent dart 6.7 release. The build script only upgrades <code>libdart6-utils-urdf-dev</code>, while <code>libdart6-dev</code> is still the old version, which causes configuration to fail.</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/372/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-default-xenial-amd64-gpu-none&amp;build=372\" /></a> <a href=\"https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/372/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/372/</a></li>\n</ul>\n<p>I reran the build with an invalidated cache, and it succeeded:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/373/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=gazebo-ci-default-xenial-amd64-gpu-none&amp;build=373\" /></a> <a href=\"https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/373/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/gazebo-ci-default-xenial-amd64-gpu-none/373/</a></li>\n</ul>\n<p>I suppose an alternative is to list more dart6 packages in the dependency list?</p>", "type": "rendered"}, "created_on": "2019-01-11T18:28:37.562335+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-01-11T18:28:37.570794+00:00", "type": "pullrequest_comment", "id": 87835202}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"update": {"description": "docker_generate_dockerfile.bash: run apt-get upgrade", "title": "docker_generate_dockerfile.bash: run apt-get upgrade", "destination": {"commit": {"hash": "a0a2425c1144", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/a0a2425c1144.json"}, "html": {"href": "#!/osrf/release-tools/commits/a0a2425c1144"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "be74b61eb07a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/be74b61eb07a.json"}, "html": {"href": "#!/osrf/release-tools/commits/be74b61eb07a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "docker_apt_upgrade"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-01-11T18:23:47.023747+00:00"}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"update": {"description": "docker_generate_dockerfile.bash: run apt-get upgrade", "title": "docker_generate_dockerfile.bash: run apt-get upgrade", "destination": {"commit": {"hash": "a0a2425c1144", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/a0a2425c1144.json"}, "html": {"href": "#!/osrf/release-tools/commits/a0a2425c1144"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "be74b61eb07a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/be74b61eb07a.json"}, "html": {"href": "#!/osrf/release-tools/commits/be74b61eb07a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "docker_apt_upgrade"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-01-11T18:23:46.088566+00:00"}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}, {"update": {"description": "docker_generate_dockerfile.bash: run apt-get upgrade", "title": "docker_generate_dockerfile.bash: run apt-get upgrade", "destination": {"commit": {"hash": "a0a2425c1144", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/a0a2425c1144.json"}, "html": {"href": "#!/osrf/release-tools/commits/a0a2425c1144"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "be74b61eb07a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/be74b61eb07a.json"}, "html": {"href": "#!/osrf/release-tools/commits/be74b61eb07a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "docker_apt_upgrade"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-01-11T18:23:46.013656+00:00"}, "pull_request": {"type": "pullrequest", "id": 723, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/723.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/723"}}, "title": "docker_generate_dockerfile.bash: run apt-get upgrade"}}]}