{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/942/comments/141070274.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/942/_/diff#comment-141070274"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 942, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/942.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/942"}}, "title": "Fix the upload a source package when new versions are uploaded"}, "content": {"raw": "who is a good person to review this? I'm not sure I understand it well enough", "markup": "markdown", "html": "<p>who is a good person to review this? I'm not sure I understand it well enough</p>", "type": "rendered"}, "created_on": "2020-03-20T01:24:01.682419+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2020-03-20T01:24:01.687737+00:00", "type": "pullrequest_comment", "id": 141070274}, "pull_request": {"type": "pullrequest", "id": 942, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/942.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/942"}}, "title": "Fix the upload a source package when new versions are uploaded"}}, {"update": {"description": "Current code only uploaded source packages \\(.dsc\\) to the repository when the package being uploaded does not have any versions. The problem with this is that new versions of the same  package does not get the source package updated as well.\r\n\r\nThese changes try to detect new versions and upload them.\r\n\r\nOnly tried it for an already existing version:\r\n\r\n![](https://build.osrfoundation.org/buildStatus/icon?job=repository_uploader_packages&build=2880)\r\n[https://build.osrfoundation.org/view/All/job/repository\\_uploader\\_packages/2880/](https://build.osrfoundation.org/view/All/job/repository_uploader_packages/2880/))\r\n\r\n\u200c\r\n\r\n```\r\n+ for pkg in '`ls $pkgs_path/*.dsc`'\r\n+ pkg_name_clean=lark-parser_0.7.8-1osrf~focal.dsc\r\n+ pkg_name=lark-parser\r\n+ pkg_version=0.7.8-1osrf~focal.dsc\r\n+ pkg_version=0.7.8-1osrf~focal\r\n+ dsc_package_exists_and_equal_or_greater lark-parser 0.7.8-1osrf~focal\r\n+ local pkg=lark-parser new_version=0.7.8-1osrf~focal\r\n++ sudo GNUPGHOME=/var/lib/jenkins/.gnupg/ reprepro -T dsc ls lark-parser\r\n++ grep focal\r\n+ current_dsc_info='lark-parser |                  0.7.8-1osrf~focal |  focal | source'\r\n+ [[ -z lark-parser |                  0.7.8-1osrf~focal |  focal | source ]]\r\n++ awk '{ print $3 }'\r\n+ current_version=0.7.8-1osrf~focal\r\n++ dpkg --compare-versions 0.7.8-1osrf~focal lt 0.7.8-1osrf~focal\r\n+ return 0\r\n+ echo 'Source package for /var/lib/jenkins/workspace/repository_uploader_packages/pkgs/lark-parser_0.7.8-1osrf~focal.dsc already exists in the repo and it'\\''s greater or equal than current version'\r\n```\r\n\r\n\u200c", "title": "Fix the upload a source package when new versions are uploaded", "destination": {"commit": {"hash": "2331a3edbd80", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/2331a3edbd80.json"}, "html": {"href": "#!/osrf/release-tools/commits/2331a3edbd80"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "96722727273c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/96722727273c.json"}, "html": {"href": "#!/osrf/release-tools/commits/96722727273c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "support_src_xz"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-03-20T01:22:24.746077+00:00"}, "pull_request": {"type": "pullrequest", "id": 942, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/942.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/942"}}, "title": "Fix the upload a source package when new versions are uploaded"}}, {"update": {"description": "Current code only uploaded source packages \\(.dsc\\) to the repository when the package being uploaded does not have any versions. The problem with this is that new versions of the same  package does not get the source package updated as well.\r\n\r\nThese changes try to detect new versions and upload them.\r\n\r\nOnly tried it for an already existing version:\r\n\r\n![](https://build.osrfoundation.org/buildStatus/icon?job=repository_uploader_packages&build=2880)\r\n[https://build.osrfoundation.org/view/All/job/repository\\_uploader\\_packages/2880/](https://build.osrfoundation.org/view/All/job/repository_uploader_packages/2880/))\r\n\r\n\u200c\r\n\r\n```\r\n+ for pkg in '`ls $pkgs_path/*.dsc`'\r\n+ pkg_name_clean=lark-parser_0.7.8-1osrf~focal.dsc\r\n+ pkg_name=lark-parser\r\n+ pkg_version=0.7.8-1osrf~focal.dsc\r\n+ pkg_version=0.7.8-1osrf~focal\r\n+ dsc_package_exists_and_equal_or_greater lark-parser 0.7.8-1osrf~focal\r\n+ local pkg=lark-parser new_version=0.7.8-1osrf~focal\r\n++ sudo GNUPGHOME=/var/lib/jenkins/.gnupg/ reprepro -T dsc ls lark-parser\r\n++ grep focal\r\n+ current_dsc_info='lark-parser |                  0.7.8-1osrf~focal |  focal | source'\r\n+ [[ -z lark-parser |                  0.7.8-1osrf~focal |  focal | source ]]\r\n++ awk '{ print $3 }'\r\n+ current_version=0.7.8-1osrf~focal\r\n++ dpkg --compare-versions 0.7.8-1osrf~focal lt 0.7.8-1osrf~focal\r\n+ return 0\r\n+ echo 'Source package for /var/lib/jenkins/workspace/repository_uploader_packages/pkgs/lark-parser_0.7.8-1osrf~focal.dsc already exists in the repo and it'\\''s greater or equal than current version'\r\n```\r\n\r\n\u200c", "title": "Fix the upload a source package when new versions are uploaded", "destination": {"commit": {"hash": "2331a3edbd80", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/2331a3edbd80.json"}, "html": {"href": "#!/osrf/release-tools/commits/2331a3edbd80"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "96722727273c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/96722727273c.json"}, "html": {"href": "#!/osrf/release-tools/commits/96722727273c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "support_src_xz"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2020-03-20T01:22:22.883005+00:00"}, "pull_request": {"type": "pullrequest", "id": 942, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/942.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/942"}}, "title": "Fix the upload a source package when new versions are uploaded"}}, {"update": {"description": "Current code only uploaded source packages \\(.dsc\\) to the repository when the package being uploaded does not have any versions. The problem with this is that new versions of the same  package does not get the source package updated as well.\r\n\r\nThese changes try to detect new versions and upload them.\r\n\r\nOnly tried it for an already existing version:\r\n\r\n![](https://build.osrfoundation.org/buildStatus/icon?job=repository_uploader_packages&build=2880)\r\n[https://build.osrfoundation.org/view/All/job/repository\\_uploader\\_packages/2880/](https://build.osrfoundation.org/view/All/job/repository_uploader_packages/2880/))\r\n\r\n\u200c\r\n\r\n```\r\n+ for pkg in '`ls $pkgs_path/*.dsc`'\r\n+ pkg_name_clean=lark-parser_0.7.8-1osrf~focal.dsc\r\n+ pkg_name=lark-parser\r\n+ pkg_version=0.7.8-1osrf~focal.dsc\r\n+ pkg_version=0.7.8-1osrf~focal\r\n+ dsc_package_exists_and_equal_or_greater lark-parser 0.7.8-1osrf~focal\r\n+ local pkg=lark-parser new_version=0.7.8-1osrf~focal\r\n++ sudo GNUPGHOME=/var/lib/jenkins/.gnupg/ reprepro -T dsc ls lark-parser\r\n++ grep focal\r\n+ current_dsc_info='lark-parser |                  0.7.8-1osrf~focal |  focal | source'\r\n+ [[ -z lark-parser |                  0.7.8-1osrf~focal |  focal | source ]]\r\n++ awk '{ print $3 }'\r\n+ current_version=0.7.8-1osrf~focal\r\n++ dpkg --compare-versions 0.7.8-1osrf~focal lt 0.7.8-1osrf~focal\r\n+ return 0\r\n+ echo 'Source package for /var/lib/jenkins/workspace/repository_uploader_packages/pkgs/lark-parser_0.7.8-1osrf~focal.dsc already exists in the repo and it'\\''s greater or equal than current version'\r\n```\r\n\r\n\u200c", "title": "Fix the upload a source package when new versions are uploaded", "destination": {"commit": {"hash": "79f6fb1d393a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/79f6fb1d393a.json"}, "html": {"href": "#!/osrf/release-tools/commits/79f6fb1d393a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a710028efd16", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/a710028efd16.json"}, "html": {"href": "#!/osrf/release-tools/commits/a710028efd16"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "support_src_xz"}}, "state": "OPEN", "author": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "date": "2020-01-10T18:54:47.312698+00:00"}, "pull_request": {"type": "pullrequest", "id": 942, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/942.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/942"}}, "title": "Fix the upload a source package when new versions are uploaded"}}, {"update": {"description": "Current code only uploaded source packages \\(.dsc\\) to the repository when the package being uploaded does not have any versions. The problem with this is that new versions of the same  package does not get the source package updated as well.\r\n\r\nThese changes try to detect new versions and upload them.\r\n\r\nOnly tried it for an already existing version:\r\n\r\n![](https://build.osrfoundation.org/buildStatus/icon?job=repository_uploader_packages&build=2880)\r\n[https://build.osrfoundation.org/view/All/job/repository\\_uploader\\_packages/2880/](https://build.osrfoundation.org/view/All/job/repository_uploader_packages/2880/))\r\n\r\n\u200c\r\n\r\n```\r\n+ for pkg in '`ls $pkgs_path/*.dsc`'\r\n+ pkg_name_clean=lark-parser_0.7.8-1osrf~focal.dsc\r\n+ pkg_name=lark-parser\r\n+ pkg_version=0.7.8-1osrf~focal.dsc\r\n+ pkg_version=0.7.8-1osrf~focal\r\n+ dsc_package_exists_and_equal_or_greater lark-parser 0.7.8-1osrf~focal\r\n+ local pkg=lark-parser new_version=0.7.8-1osrf~focal\r\n++ sudo GNUPGHOME=/var/lib/jenkins/.gnupg/ reprepro -T dsc ls lark-parser\r\n++ grep focal\r\n+ current_dsc_info='lark-parser |                  0.7.8-1osrf~focal |  focal | source'\r\n+ [[ -z lark-parser |                  0.7.8-1osrf~focal |  focal | source ]]\r\n++ awk '{ print $3 }'\r\n+ current_version=0.7.8-1osrf~focal\r\n++ dpkg --compare-versions 0.7.8-1osrf~focal lt 0.7.8-1osrf~focal\r\n+ return 0\r\n+ echo 'Source package for /var/lib/jenkins/workspace/repository_uploader_packages/pkgs/lark-parser_0.7.8-1osrf~focal.dsc already exists in the repo and it'\\''s greater or equal than current version'\r\n```\r\n\r\n\u200c", "title": "Fix the upload a source package when new versions are uploaded", "destination": {"commit": {"hash": "79f6fb1d393a", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/79f6fb1d393a.json"}, "html": {"href": "#!/osrf/release-tools/commits/79f6fb1d393a"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "a710028efd16", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/a710028efd16.json"}, "html": {"href": "#!/osrf/release-tools/commits/a710028efd16"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "support_src_xz"}}, "state": "OPEN", "author": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "date": "2020-01-10T18:54:47.274385+00:00"}, "pull_request": {"type": "pullrequest", "id": 942, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/942.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/942"}}, "title": "Fix the upload a source package when new versions are uploaded"}}]}