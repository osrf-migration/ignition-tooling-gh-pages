{"pagelen": 50, "values": [{"approval": {"date": "2020-03-26T00:22:58.037339+00:00", "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"update": {"description": "This solves an error \\` libGL error: failed to load driver: swrast\\` that only seems to happen on `drogon`. As far as I can tell, it looks like it has to do with drogon using `nvidia-docker2`. The nodes using `nvidia-docker` 1 work fine.\r\n\r\nFailing job:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1163/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console)\r\n\r\nSuccessful job with this PR:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1166/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console)\r\n\r\n\u200c\r\n\r\nThis PR installs `libglvnd` inside the docker image, which seems to be what the NVidia images do: [https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile](https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile)\r\n\r\n\u200c\r\n\r\nIt would be nice if this job used osrf/rocker, but that looks like a larger change. [https://github.com/osrf/rocker](https://github.com/osrf/rocker)\r\n\r\n\u200c", "title": "Install libglvnd if using nvidia-docker2", "destination": {"commit": {"hash": "1be3883b459c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/1be3883b459c.json"}, "html": {"href": "#!/osrf/release-tools/commits/1be3883b459c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "5bfbdbbacdc2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/5bfbdbbacdc2.json"}, "html": {"href": "#!/osrf/release-tools/commits/5bfbdbbacdc2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "sloretz/nvidia_docker_2_opengl"}}, "state": "MERGED", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2020-03-26T00:13:54.932732+00:00"}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"approval": {"date": "2020-03-26T00:13:31.896311+00:00", "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142018272.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142018272"}}, "parent": {"id": 142017665, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017665.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017665"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "Roger, merging!", "markup": "markdown", "html": "<p>Roger, merging!</p>", "type": "rendered"}, "created_on": "2020-03-26T00:13:29.198497+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {}, "updated_on": "2020-03-26T00:13:29.202126+00:00", "type": "pullrequest_comment", "id": 142018272}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142018245.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142018245"}}, "parent": {"id": 142017846, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017846.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017846"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "Job passed! :tada: ", "markup": "markdown", "html": "<p>Job passed! <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f389.png\" alt=\"\ud83c\udf89\" title=\":tada:\" data-emoji-short-name=\":tada:\" /> </p>", "type": "rendered"}, "created_on": "2020-03-26T00:13:05.652809+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2020-03-26T00:13:05.656938+00:00", "type": "pullrequest_comment", "id": 142018245}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"update": {"description": "This solves an error \\` libGL error: failed to load driver: swrast\\` that only seems to happen on `drogon`. As far as I can tell, it looks like it has to do with drogon using `nvidia-docker2`. The nodes using `nvidia-docker` 1 work fine.\r\n\r\nFailing job:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1163/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console)\r\n\r\nSuccessful job with this PR:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1166/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console)\r\n\r\n\u200c\r\n\r\nThis PR installs `libglvnd` inside the docker image, which seems to be what the NVidia images do: [https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile](https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile)\r\n\r\n\u200c\r\n\r\nIt would be nice if this job used osrf/rocker, but that looks like a larger change. [https://github.com/osrf/rocker](https://github.com/osrf/rocker)\r\n\r\n\u200c", "title": "Install libglvnd if using nvidia-docker2", "destination": {"commit": {"hash": "1be3883b459c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/1be3883b459c.json"}, "html": {"href": "#!/osrf/release-tools/commits/1be3883b459c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "5bfbdbbacdc2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/5bfbdbbacdc2.json"}, "html": {"href": "#!/osrf/release-tools/commits/5bfbdbbacdc2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "sloretz/nvidia_docker_2_opengl"}}, "state": "OPEN", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2020-03-26T00:11:04.840600+00:00"}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017846.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017846"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "Running a build with the latest change:\n\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1169/](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1169/)", "markup": "markdown", "html": "<p>Running a build with the latest change:</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1169/\" rel=\"nofollow\">https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1169/</a></p>", "type": "rendered"}, "created_on": "2020-03-26T00:06:53.703715+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2020-03-26T00:06:53.706153+00:00", "type": "pullrequest_comment", "id": 142017846}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017754.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017754"}}, "parent": {"id": 142017509, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017509.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017509"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "Using tag `v1.2.0` in 5bfbdbbacdc2", "markup": "markdown", "html": "<p>Using tag <code>v1.2.0</code> in <a href=\"#!/osrf/release-tools/commits/5bfbdbbacdc2\" rel=\"nofollow\" class=\"ap-connect-link\">5bfbdbbacdc2</a></p>", "type": "rendered"}, "created_on": "2020-03-26T00:05:30.751222+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {}, "updated_on": "2020-03-26T00:05:30.755312+00:00", "type": "pullrequest_comment", "id": 142017754}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017665.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017665"}}, "parent": {"id": 142017509, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017509.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017509"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "if the change passes a CI run, feel free to merge. Thanks Shane!", "markup": "markdown", "html": "<p>if the change passes a CI run, feel free to merge. Thanks Shane!</p>", "type": "rendered"}, "created_on": "2020-03-26T00:04:08.732507+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2020-03-26T00:04:15.472643+00:00", "type": "pullrequest_comment", "id": 142017665}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017623.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017623"}}, "parent": {"id": 142017557, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017557.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017557"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "perfect", "markup": "markdown", "html": "<p>perfect</p>", "type": "rendered"}, "created_on": "2020-03-26T00:03:26.797146+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2020-03-26T00:03:26.801098+00:00", "type": "pullrequest_comment", "id": 142017623}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017557.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017557"}}, "parent": {"id": 142017064, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017064.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017064"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "And here\u2019s glxinfo inside the container without this PR. Looks like with this PR it uses nvidia, and without it it defaults to swrast.\n\n[https://gist.github.com/sloretz/071b0fff121f19e5d9463f9e9553d488](https://gist.github.com/sloretz/071b0fff121f19e5d9463f9e9553d488)", "markup": "markdown", "html": "<p>And here\u2019s glxinfo inside the container without this PR. Looks like with this PR it uses nvidia, and without it it defaults to swrast.</p>\n<p><a data-is-external-link=\"true\" href=\"https://gist.github.com/sloretz/071b0fff121f19e5d9463f9e9553d488\" rel=\"nofollow\">https://gist.github.com/sloretz/071b0fff121f19e5d9463f9e9553d488</a></p>", "type": "rendered"}, "created_on": "2020-03-26T00:02:29.777612+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2020-03-26T00:02:29.782531+00:00", "type": "pullrequest_comment", "id": 142017557}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017552.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017552"}}, "parent": {"id": 142017064, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017064.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017064"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "I think both are right about using nvidia hardware acceleration.", "markup": "markdown", "html": "<p>I think both are right about using nvidia hardware acceleration.</p>", "type": "rendered"}, "created_on": "2020-03-26T00:02:25.993941+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2020-03-26T00:02:25.998202+00:00", "type": "pullrequest_comment", "id": 142017552}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017509.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017509"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "could we use or clone a particular version here for libglvnd \\(1.2.0 is the latest release seems a good candidate to me\\)", "markup": "markdown", "html": "<p>could we use or clone a particular version here for libglvnd (1.2.0 is the latest release seems a good candidate to me)</p>", "type": "rendered"}, "created_on": "2020-03-26T00:01:39.806529+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2020-03-26T00:01:39.809394+00:00", "type": "pullrequest_comment", "id": 142017509}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142017064.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142017064"}}, "parent": {"id": 142015605, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142015605.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142015605"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "Here\u2019s glxinfo inside the container with this PR [https://gist.github.com/sloretz/ba0f147cbee7d18b44cdd8d05fc8ceec](https://gist.github.com/sloretz/ba0f147cbee7d18b44cdd8d05fc8ceec)", "markup": "markdown", "html": "<p>Here\u2019s glxinfo inside the container with this PR <a data-is-external-link=\"true\" href=\"https://gist.github.com/sloretz/ba0f147cbee7d18b44cdd8d05fc8ceec\" rel=\"nofollow\">https://gist.github.com/sloretz/ba0f147cbee7d18b44cdd8d05fc8ceec</a></p>", "type": "rendered"}, "created_on": "2020-03-25T23:55:32.180017+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2020-03-25T23:55:32.184548+00:00", "type": "pullrequest_comment", "id": 142017064}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142015605.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142015605"}}, "parent": {"id": 142012225, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142012225.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142012225"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "> I might be wrong but my impression about this bug is that something is somehow killing the X server in drogon \\(probably a non controlled number of jobs compilation that ate all the RAM\\) and when it\u2019s back it is not using graphic acceleration. If drogon is rebooted the current setup seems to work fine until problems arise.\n\nHmm maybe the X server was killed and restarted. Drogon has been up for 22 days, b the Xorg process on `drogon` has been up for only 7 days.\n\n```\nubuntu@ip-10-191-49-253:~$ uptime\n 23:17:38 up 22 days,  6:28,  1 user,  load average: 0.00, 0.00, 0.17\n```\n\n```\n$ ps -ef | grep Xorg\nroot      2482  2476  0 Mar18 tty7     00:00:21 /usr/lib/xorg/Xorg -core :0 -seat seat0 -auth /var/run/lightdm/root/:0 -nolisten tcp vt7 -novtswitch\n```\n\n```\n$ ps -o etime -p 2482\n    ELAPSED\n 7-00:42:30\n```\n\nCoincidentally, a lot of jobs failed with a java traceback followed by no disk space `7 days 0 hr` ago \\(the 7 day 3 hr ago job failures look unrelated\\).\n\n![](data/bitbucket.org/repo/ngjznb/images/3559626744-Screenshot_from_2020-03-25_16-25-53.png)\n\u200c\n\nHowever; it doesn\u2019t seem to be related to the `swrast` failure. Before that incident the gazebo10 jobs are failing with the same `swrast` error\n\nLike this one 7 days 11 hours ago\n\n[https://build.osrfoundation.org/job/gazebo-install-gazebo10\\_pkg-xenial-amd64/433/console](https://build.osrfoundation.org/job/gazebo-install-gazebo10_pkg-xenial-amd64/433/console)\n\nOr this one 14 days ago\n\n[https://build.osrfoundation.org/job/gazebo-install-gazebo10\\_pkg-xenial-amd64/426](https://build.osrfoundation.org/job/gazebo-install-gazebo10_pkg-xenial-amd64/426)\n\n\u200c\n\nInterestingly, none of the gazebo11 jobs I found failed with the `swrast` error. What makes that job special?\n\n[https://build.osrfoundation.org/job/gazebo-install-gazebo11\\_pkg-bionic-amd64/53/console](https://build.osrfoundation.org/job/gazebo-install-gazebo11_pkg-bionic-amd64/53/console)\n\n\u200c\n\n> What does glxinfo display when using this setup inside the container in drogon?\n\nI haven\u2019t tried to run glxinfo inside the container of a job \\(I\u2019ll work on that\\), but here\u2019s what it looks like outside the container.\n\n[https://gist.github.com/sloretz/d63c8311e329048c1c9ac1972682480f](https://gist.github.com/sloretz/d63c8311e329048c1c9ac1972682480f)", "markup": "markdown", "html": "<blockquote>\n<p>I might be wrong but my impression about this bug is that something is somehow killing the X server in drogon (probably a non controlled number of jobs compilation that ate all the RAM) and when it\u2019s back it is not using graphic acceleration. If drogon is rebooted the current setup seems to work fine until problems arise.</p>\n</blockquote>\n<p>Hmm maybe the X server was killed and restarted. Drogon has been up for 22 days, b the Xorg process on <code>drogon</code> has been up for only 7 days.</p>\n<div class=\"codehilite\"><pre><span></span>ubuntu@ip-10-191-49-253:~$ uptime\n 23:17:38 up 22 days,  6:28,  1 user,  load average: 0.00, 0.00, 0.17\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>$ ps -ef <span class=\"p\">|</span> grep Xorg\nroot      <span class=\"m\">2482</span>  <span class=\"m\">2476</span>  <span class=\"m\">0</span> Mar18 tty7     <span class=\"m\">00</span>:00:21 /usr/lib/xorg/Xorg -core :0 -seat seat0 -auth /var/run/lightdm/root/:0 -nolisten tcp vt7 -novtswitch\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>$ ps -o etime -p <span class=\"m\">2482</span>\n    ELAPSED\n <span class=\"m\">7</span>-00:42:30\n</pre></div>\n\n\n<p>Coincidentally, a lot of jobs failed with a java traceback followed by no disk space <code>7 days 0 hr</code> ago (the 7 day 3 hr ago job failures look unrelated).</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/ngjznb/images/3559626744-Screenshot_from_2020-03-25_16-25-53.png\" />\n\u200c</p>\n<p>However; it doesn\u2019t seem to be related to the <code>swrast</code> failure. Before that incident the gazebo10 jobs are failing with the same <code>swrast</code> error</p>\n<p>Like this one 7 days 11 hours ago</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-install-gazebo10_pkg-xenial-amd64/433/console\" rel=\"nofollow\">https://build.osrfoundation.org/job/gazebo-install-gazebo10_pkg-xenial-amd64/433/console</a></p>\n<p>Or this one 14 days ago</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-install-gazebo10_pkg-xenial-amd64/426\" rel=\"nofollow\">https://build.osrfoundation.org/job/gazebo-install-gazebo10_pkg-xenial-amd64/426</a></p>\n<p>\u200c</p>\n<p>Interestingly, none of the gazebo11 jobs I found failed with the <code>swrast</code> error. What makes that job special?</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-install-gazebo11_pkg-bionic-amd64/53/console\" rel=\"nofollow\">https://build.osrfoundation.org/job/gazebo-install-gazebo11_pkg-bionic-amd64/53/console</a></p>\n<p>\u200c</p>\n<blockquote>\n<p>What does glxinfo display when using this setup inside the container in drogon?</p>\n</blockquote>\n<p>I haven\u2019t tried to run glxinfo inside the container of a job (I\u2019ll work on that), but here\u2019s what it looks like outside the container.</p>\n<p><a data-is-external-link=\"true\" href=\"https://gist.github.com/sloretz/d63c8311e329048c1c9ac1972682480f\" rel=\"nofollow\">https://gist.github.com/sloretz/d63c8311e329048c1c9ac1972682480f</a></p>", "type": "rendered"}, "created_on": "2020-03-25T23:35:52.922849+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2020-03-25T23:48:50.292077+00:00", "type": "pullrequest_comment", "id": 142015605}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142012225.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142012225"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "I might be wrong but my impression about this bug is that something is somehow killing the X server in drogon \\(probably a non controlled number of jobs compilation that ate all the RAM\\) and when it\u2019s back it is not using graphic acceleration. If drogon is rebooted the current setup seems to work fine until problems arise.\n\nSeems like this PR could workaround the problem adding a layer of indirect through `libglvnd` that could connect with nvidia driver \\(hopefully\\) or it is using a different acceleration. What does glxinfo display when using this setup inside the container in drogon?\n\nThanks Shane.", "markup": "markdown", "html": "<p>I might be wrong but my impression about this bug is that something is somehow killing the X server in drogon (probably a non controlled number of jobs compilation that ate all the RAM) and when it\u2019s back it is not using graphic acceleration. If drogon is rebooted the current setup seems to work fine until problems arise.</p>\n<p>Seems like this PR could workaround the problem adding a layer of indirect through <code>libglvnd</code> that could connect with nvidia driver (hopefully) or it is using a different acceleration. What does glxinfo display when using this setup inside the container in drogon?</p>\n<p>Thanks Shane.</p>", "type": "rendered"}, "created_on": "2020-03-25T22:54:26.699854+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2020-03-25T22:54:26.702539+00:00", "type": "pullrequest_comment", "id": 142012225}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"update": {"description": "This solves an error \\` libGL error: failed to load driver: swrast\\` that only seems to happen on `drogon`. As far as I can tell, it looks like it has to do with drogon using `nvidia-docker2`. The nodes using `nvidia-docker` 1 work fine.\r\n\r\nFailing job:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1163/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console)\r\n\r\nSuccessful job with this PR:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1166/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console)\r\n\r\n\u200c\r\n\r\nThis PR installs `libglvnd` inside the docker image, which seems to be what the NVidia images do: [https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile](https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile)\r\n\r\n\u200c\r\n\r\nIt would be nice if this job used osrf/rocker, but that looks like a larger change. [https://github.com/osrf/rocker](https://github.com/osrf/rocker)\r\n\r\n\u200c", "title": "Install libglvnd if using nvidia-docker2", "destination": {"commit": {"hash": "1be3883b459c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/1be3883b459c.json"}, "html": {"href": "#!/osrf/release-tools/commits/1be3883b459c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8210139c22c7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/8210139c22c7.json"}, "html": {"href": "#!/osrf/release-tools/commits/8210139c22c7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "sloretz/nvidia_docker_2_opengl"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-03-25T22:30:27.784337+00:00"}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142004994.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142004994"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "note to self: Add back`gpu-reliable` label to drogon when this is merged", "markup": "markdown", "html": "<p>note to self: Add back<code>gpu-reliable</code> label to drogon when this is merged</p>", "type": "rendered"}, "created_on": "2020-03-25T21:43:38.016279+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2020-03-25T21:43:38.018921+00:00", "type": "pullrequest_comment", "id": 142004994}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"update": {"description": "This solves an error \\` libGL error: failed to load driver: swrast\\` that only seems to happen on `drogon`. As far as I can tell, it looks like it has to do with drogon using `nvidia-docker2`. The nodes using `nvidia-docker` 1 work fine.\r\n\r\nFailing job:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1163/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console)\r\n\r\nSuccessful job with this PR:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1166/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console)\r\n\r\n\u200c\r\n\r\nThis PR installs `libglvnd` inside the docker image, which seems to be what the NVidia images do: [https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile](https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile)\r\n\r\n\u200c\r\n\r\nIt would be nice if this job used osrf/rocker, but that looks like a larger change. [https://github.com/osrf/rocker](https://github.com/osrf/rocker)\r\n\r\n\u200c", "title": "Install libglvnd if using nvidia-docker2", "destination": {"commit": {"hash": "1be3883b459c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/1be3883b459c.json"}, "html": {"href": "#!/osrf/release-tools/commits/1be3883b459c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8210139c22c7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/8210139c22c7.json"}, "html": {"href": "#!/osrf/release-tools/commits/8210139c22c7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "sloretz/nvidia_docker_2_opengl"}}, "state": "OPEN", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2020-03-25T21:41:46.580969+00:00"}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments/142004349.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973/_/diff#comment-142004349"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}, "content": {"raw": "The apt-get block I copied from the NVidia images deletes `/var/lib/apt/lists`. That caused this snippet to fail to find the package it was installing. I added this so this snippet doesn\u2019t have to rely on someone else calling `apt-get update`.", "markup": "markdown", "html": "<p>The apt-get block I copied from the NVidia images deletes <code>/var/lib/apt/lists</code>. That caused this snippet to fail to find the package it was installing. I added this so this snippet doesn\u2019t have to rely on someone else calling <code>apt-get update</code>.</p>", "type": "rendered"}, "created_on": "2020-03-25T21:37:53.660530+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {}, "updated_on": "2020-03-25T21:37:53.663050+00:00", "type": "pullrequest_comment", "id": 142004349}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"update": {"description": "This solves an error \\` libGL error: failed to load driver: swrast\\` that only seems to happen on `drogon`. As far as I can tell, it looks like it has to do with drogon using `nvidia-docker2`. The nodes using `nvidia-docker` 1 work fine. \n\nFailing job:\n\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1163/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console)\n\nSuccessful job with this PR:\n\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1166/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console)\n\n\u200c\n\nThis PR installs `libglvnd` inside the docker image, which seems to be what the NVidia images do: [https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile](https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile)\n\n\u200c\n\nIt would be nice if this job used osrf/rocker, but that looks like a larger change. [https://github.com/osrf/rocker](https://github.com/osrf/rocker)\n\n\u200c", "title": "[wip] Install libglvnd if using nvidia-docker2", "destination": {"commit": {"hash": "1be3883b459c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/1be3883b459c.json"}, "html": {"href": "#!/osrf/release-tools/commits/1be3883b459c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8210139c22c7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/8210139c22c7.json"}, "html": {"href": "#!/osrf/release-tools/commits/8210139c22c7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "sloretz/nvidia_docker_2_opengl"}}, "state": "OPEN", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2020-03-25T21:35:55.089682+00:00"}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}, {"update": {"description": "This solves an error \\` libGL error: failed to load driver: swrast\\` that only seems to happen on `drogon`. As far as I can tell, it looks like it has to do with drogon using `nvidia-docker2`. The nodes using `nvidia-docker` 1 work fine. \n\nFailing job:\n\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1163/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console)\n\nSuccessful job with this PR:\n\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1166/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console)\n\n\u200c\n\nThis PR installs `libglvnd` inside the docker image, which seems to be what the NVidia images do: [https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile](https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile)\n\n\u200c\n\nIt would be nice if this job used osrf/rocker, but that looks like a larger change. [https://github.com/osrf/rocker](https://github.com/osrf/rocker)\n\n\u200c", "title": "[wip] Install libglvnd if using nvidia-docker2", "destination": {"commit": {"hash": "1be3883b459c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/1be3883b459c.json"}, "html": {"href": "#!/osrf/release-tools/commits/1be3883b459c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8210139c22c7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/8210139c22c7.json"}, "html": {"href": "#!/osrf/release-tools/commits/8210139c22c7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "sloretz/nvidia_docker_2_opengl"}}, "state": "OPEN", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2020-03-25T21:35:55.053842+00:00"}, "pull_request": {"type": "pullrequest", "id": 973, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}}, "title": "Install libglvnd if using nvidia-docker2"}}]}