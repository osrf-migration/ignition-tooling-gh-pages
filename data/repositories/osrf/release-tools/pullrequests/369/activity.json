{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31149777.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31149777"}}, "parent": {"id": 31149336, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31149336.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31149336"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "Ummm, let me fix it in a different PR. There are other scripts failing: http://build.osrfoundation.org/job/srcsim-ci-default-trusty-amd64/20/console", "markup": "markdown", "html": "<p>Ummm, let me fix it in a different PR. There are other scripts failing: <a href=\"http://build.osrfoundation.org/job/srcsim-ci-default-trusty-amd64/20/console\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/job/srcsim-ci-default-trusty-amd64/20/console</a></p>", "type": "rendered"}, "created_on": "2017-02-08T23:00:42.757420+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2017-02-08T23:00:42.760125+00:00", "type": "pullrequest_comment", "id": 31149777}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31149336.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31149336"}}, "parent": {"id": 31148353, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31148353.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31148353"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "Even with docker cache invalidated, POST this PR the build fails :(\n\nShould we revert the merge?", "markup": "markdown", "html": "<p>Even with docker cache invalidated, POST this PR the build fails :(</p>\n<p>Should we revert the merge?</p>", "type": "rendered"}, "created_on": "2017-02-08T22:52:00.168663+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2017-02-08T22:52:00.170835+00:00", "type": "pullrequest_comment", "id": 31149336}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31148353.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31148353"}}, "parent": {"id": 31148155, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31148155.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31148155"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "I started a build with this parameter set http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/25/", "markup": "markdown", "html": "<p>I started a build with this parameter set <a href=\"http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/25/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/25/</a></p>", "type": "rendered"}, "created_on": "2017-02-08T22:33:14.652126+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2017-02-08T22:33:14.654370+00:00", "type": "pullrequest_comment", "id": 31148353}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31148155.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31148155"}}, "parent": {"id": 31147809, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31147809.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31147809"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "yes. You also can create manually a Bool Parameter in the same web named `INVALIDATE_DOCKER_CACHE`.", "markup": "markdown", "html": "<p>yes. You also can create manually a Bool Parameter in the same web named <code>INVALIDATE_DOCKER_CACHE</code>.</p>", "type": "rendered"}, "created_on": "2017-02-08T22:28:50.520909+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2017-02-08T22:28:50.523494+00:00", "type": "pullrequest_comment", "id": 31148155}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31147809.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31147809"}}, "parent": {"id": 31145593, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31145593.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31145593"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "When you say defined manually, do you mean by adding `export INVALIDATE_DOCKER_CACHE=true` here?\n\n![invalidate_cache_location.png](data/bitbucket.org/repo/ngjznb/images/2059996048-invalidate_cache_location.png)", "markup": "markdown", "html": "<p>When you say defined manually, do you mean by adding <code>export INVALIDATE_DOCKER_CACHE=true</code> here?</p>\n<p><img alt=\"invalidate_cache_location.png\" src=\"data/bitbucket.org/repo/ngjznb/images/2059996048-invalidate_cache_location.png\" /></p>", "type": "rendered"}, "created_on": "2017-02-08T22:22:41.156175+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2017-02-08T22:22:41.158914+00:00", "type": "pullrequest_comment", "id": 31147809}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"update": {"description": "[sdformat-ci-default-trusty-amd64 #47](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/47) failed because it attempted to install packages with out of date package lists. (see #100)\r\n\r\nThis PR squashes `apt-get update` into the same layer as `apt-get install`. I also squashed the `echo` statments that are being used to invalidate the cache, and added `apt-get clean` to remove the downloaded .deb files to reduce the layer size.\r\n\r\nThis branch passed testing of [sdformat-ci-default-trusty-amd64 #48](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/48/console)", "title": "Squashed layers, packages are installed with current package lists", "destination": {"commit": {"hash": "b51de8fcd1c6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/b51de8fcd1c6.json"}, "html": {"href": "#!/osrf/release-tools/commits/b51de8fcd1c6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "e714bf3bbb14", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/e714bf3bbb14.json"}, "html": {"href": "#!/osrf/release-tools/commits/e714bf3bbb14"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "cached_cache_mismatch"}}, "state": "MERGED", "author": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "date": "2017-02-08T21:42:57.911859+00:00"}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"approval": {"date": "2017-02-08T21:42:47.663751+00:00", "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31145616.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31145616"}}, "parent": {"id": 31139506, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31139506.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31139506"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "that makes sense. Let's merge this and fix the debian job.", "markup": "markdown", "html": "<p>that makes sense. Let's merge this and fix the debian job.</p>", "type": "rendered"}, "created_on": "2017-02-08T21:42:43.341248+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2017-02-08T21:42:43.344698+00:00", "type": "pullrequest_comment", "id": 31145616}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31145593.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31145593"}}, "parent": {"id": 31137028, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31137028.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31137028"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "arg, that is my fault. There is a hidden bool parameter/variable that can be (manually) defined in the configuration of the job to get the invalidation of the cache: `INVALIDATE_DOCKER_CACHE`. If you set it to true, it will remove any cache layer.", "markup": "markdown", "html": "<p>arg, that is my fault. There is a hidden bool parameter/variable that can be (manually) defined in the configuration of the job to get the invalidation of the cache: <code>INVALIDATE_DOCKER_CACHE</code>. If you set it to true, it will remove any cache layer.</p>", "type": "rendered"}, "created_on": "2017-02-08T21:42:24.825275+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2017-02-08T21:42:24.827548+00:00", "type": "pullrequest_comment", "id": 31145593}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31139506.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31139506"}}, "parent": {"id": 31137028, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31137028.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31137028"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "I made a branch that invalidated the cache `__delete__default_cache_invalidate`. It only has a [test failure](http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/23/consoleFull). I am out of ideas of what could be causing the ignition-common job to fail when using this PR.", "markup": "markdown", "html": "<p>I made a branch that invalidated the cache <code>__delete__default_cache_invalidate</code>. It only has a <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/23/consoleFull\" rel=\"nofollow\">test failure</a>. I am out of ideas of what could be causing the ignition-common job to fail when using this PR.</p>", "type": "rendered"}, "created_on": "2017-02-08T19:55:34.633580+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2017-02-08T19:55:45.435753+00:00", "type": "pullrequest_comment", "id": 31139506}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31137028.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31137028"}}, "parent": {"id": 31131823, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31131823.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31131823"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "How would I trigger the job on `default` branch and have it not use any cached docker layers? I'm looking at a diff of the console output of the two jobs, and that's the only thing that sticks out to me.", "markup": "markdown", "html": "<p>How would I trigger the job on <code>default</code> branch and have it not use any cached docker layers? I'm looking at a diff of the console output of the two jobs, and that's the only thing that sticks out to me.</p>", "type": "rendered"}, "created_on": "2017-02-08T19:12:21.891934+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2017-02-08T19:12:21.895400+00:00", "type": "pullrequest_comment", "id": 31137028}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"update": {"description": "[sdformat-ci-default-trusty-amd64 #47](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/47) failed because it attempted to install packages with out of date package lists. (see #100)\r\n\r\nThis PR squashes `apt-get update` into the same layer as `apt-get install`. I also squashed the `echo` statments that are being used to invalidate the cache, and added `apt-get clean` to remove the downloaded .deb files to reduce the layer size.\r\n\r\nThis branch passed testing of [sdformat-ci-default-trusty-amd64 #48](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/48/console)", "title": "Squashed layers, packages are installed with current package lists", "destination": {"commit": {"hash": "b51de8fcd1c6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/b51de8fcd1c6.json"}, "html": {"href": "#!/osrf/release-tools/commits/b51de8fcd1c6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "e714bf3bbb14", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/e714bf3bbb14.json"}, "html": {"href": "#!/osrf/release-tools/commits/e714bf3bbb14"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "cached_cache_mismatch"}}, "state": "OPEN", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2017-02-08T18:32:45.536808+00:00"}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31131823.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31131823"}}, "parent": {"id": 31042835, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31042835.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31042835"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "When using the default branch of release-tools, there is no error in the build: http://build.osrfoundation.org/job/ignition-common-pkg_builder-master-debian_sid-amd64/21/\n\nLet's clarify this previous to the merge.", "markup": "markdown", "html": "<p>When using the default branch of release-tools, there is no error in the build: <a href=\"http://build.osrfoundation.org/job/ignition-common-pkg_builder-master-debian_sid-amd64/21/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/job/ignition-common-pkg_builder-master-debian_sid-amd64/21/</a></p>\n<p>Let's clarify this previous to the merge.</p>", "type": "rendered"}, "created_on": "2017-02-08T17:47:28.380898+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2017-02-08T17:47:28.384197+00:00", "type": "pullrequest_comment", "id": 31131823}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"approval": {"date": "2017-02-08T16:34:36.945144+00:00", "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31042835.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31042835"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "Test builds in progress\n\n~~http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/20/~~ Build failed long after changes made by this PR, appears unrelated\n\nhttp://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/49/ Build passed", "markup": "markdown", "html": "<p>Test builds in progress</p>\n<p><del><a href=\"http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/20/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/20/</a></del> Build failed long after changes made by this PR, appears unrelated</p>\n<p><a href=\"http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/49/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/49/</a> Build passed</p>", "type": "rendered"}, "created_on": "2017-02-07T16:45:47.469882+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2017-02-07T17:10:38.445407+00:00", "type": "pullrequest_comment", "id": 31042835}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31042642.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31042642"}}, "parent": {"id": 31041603, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31041603.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31041603"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "Fixed 0d1ac92", "markup": "markdown", "html": "<p>Fixed <a href=\"#!/osrf/release-tools/commits/0d1ac92\" rel=\"nofollow\" class=\"ap-connect-link\">0d1ac92</a></p>", "type": "rendered"}, "created_on": "2017-02-07T16:43:43.403664+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {}, "updated_on": "2017-02-07T16:43:43.405709+00:00", "type": "pullrequest_comment", "id": 31042642}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"update": {"description": "[sdformat-ci-default-trusty-amd64 #47](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/47) failed because it attempted to install packages with out of date package lists. (see #100)\r\n\r\nThis PR squashes `apt-get update` into the same layer as `apt-get install`. I also squashed the `echo` statments that are being used to invalidate the cache, and added `apt-get clean` to remove the downloaded .deb files to reduce the layer size.\r\n\r\nThis branch passed testing of [sdformat-ci-default-trusty-amd64 #48](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/48/console)", "title": "Squashed layers, packages are installed with current package lists", "destination": {"commit": {"hash": "4ddad55cd9fd", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/4ddad55cd9fd.json"}, "html": {"href": "#!/osrf/release-tools/commits/4ddad55cd9fd"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0d1ac92783f8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/0d1ac92783f8.json"}, "html": {"href": "#!/osrf/release-tools/commits/0d1ac92783f8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "cached_cache_mismatch"}}, "state": "OPEN", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2017-02-07T16:43:23.095393+00:00"}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31041603.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31041603"}}, "parent": {"id": 31040584, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31040584.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31040584"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "I tried to be conservative and only react on errors, since I only found the problem in Debian in some cases. My approach was to keep lists files if possible, remove them under errors.", "markup": "markdown", "html": "<p>I tried to be conservative and only react on errors, since I only found the problem in Debian in some cases. My approach was to keep lists files if possible, remove them under errors.</p>", "type": "rendered"}, "created_on": "2017-02-07T16:32:43.070545+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2017-02-07T16:32:43.074335+00:00", "type": "pullrequest_comment", "id": 31041603}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31040584.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31040584"}}, "parent": {"id": 31039708, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31039708.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31039708"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "Does changing `apt-get update || rm -rf /var/lib/apt/lists/* && apt-get update` to `rm -rf /var/lib/apt/lists/* && apt-get update` avoid the bug without downloading some lists twice?", "markup": "markdown", "html": "<p>Does changing <code>apt-get update || rm -rf /var/lib/apt/lists/* &amp;&amp; apt-get update</code> to <code>rm -rf /var/lib/apt/lists/* &amp;&amp; apt-get update</code> avoid the bug without downloading some lists twice?</p>", "type": "rendered"}, "created_on": "2017-02-07T16:25:25.767020+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {}, "updated_on": "2017-02-07T16:25:25.770758+00:00", "type": "pullrequest_comment", "id": 31040584}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31040114.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31040114"}}, "parent": {"id": 31039708, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31039708.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31039708"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "Oops my mistake. I misunderstood what that was doing.", "markup": "markdown", "html": "<p>Oops my mistake. I misunderstood what that was doing.</p>", "type": "rendered"}, "created_on": "2017-02-07T16:22:08.285873+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {}, "updated_on": "2017-02-07T16:22:08.289640+00:00", "type": "pullrequest_comment", "id": 31040114}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369/comments/31039708.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369/_/diff#comment-31039708"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}, "content": {"raw": "Note the comment about the workaround. We are removing it in this PR and the [problematic job is back to fail](http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/19/console). Could you transplant the ' || rm -rf /var/lib/apt/lists/* && apt-get update` to the new line 205?", "markup": "markdown", "html": "<p>Note the comment about the workaround. We are removing it in this PR and the <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/All/job/ignition-common-pkg_builder-master-debian_sid-amd64/19/console\" rel=\"nofollow\">problematic job is back to fail</a>. Could you transplant the ' || rm -rf /var/lib/apt/lists/* &amp;&amp; apt-get update` to the new line 205?</p>", "type": "rendered"}, "created_on": "2017-02-07T16:19:36.197556+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2017-02-07T16:19:36.201055+00:00", "type": "pullrequest_comment", "id": 31039708}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"update": {"description": "[sdformat-ci-default-trusty-amd64 #47](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/47) failed because it attempted to install packages with out of date package lists. (see #100)\r\n\r\nThis PR squashes `apt-get update` into the same layer as `apt-get install`. I also squashed the `echo` statments that are being used to invalidate the cache, and added `apt-get clean` to remove the downloaded .deb files to reduce the layer size.\r\n\r\nThis branch passed testing of [sdformat-ci-default-trusty-amd64 #48](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/48/console)", "title": "Squashed layers, packages are installed with current package lists", "destination": {"commit": {"hash": "bc94cab07594", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/bc94cab07594.json"}, "html": {"href": "#!/osrf/release-tools/commits/bc94cab07594"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4ee27b4fbc6c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/4ee27b4fbc6c.json"}, "html": {"href": "#!/osrf/release-tools/commits/4ee27b4fbc6c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "cached_cache_mismatch"}}, "state": "OPEN", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2017-02-06T18:35:32.857207+00:00"}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"update": {"description": "[sdformat-ci-default-trusty-amd64 #47](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/47) failed because it attempted to install packages with out of date package lists. (see #100)\r\n\r\nThis PR squashes `apt-get update` into the same layer as `apt-get install`. I also squashed the `echo` statments that are being used to invalidate the cache, and added `apt-get clean` to remove the downloaded .deb files to reduce the layer size.\r\n\r\nThis branch passed testing of [sdformat-ci-default-trusty-amd64 #48](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/48/console)", "title": "Squashed layers, packages get be installed with current package lists", "destination": {"commit": {"hash": "bc94cab07594", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/bc94cab07594.json"}, "html": {"href": "#!/osrf/release-tools/commits/bc94cab07594"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4ee27b4fbc6c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/4ee27b4fbc6c.json"}, "html": {"href": "#!/osrf/release-tools/commits/4ee27b4fbc6c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "cached_cache_mismatch"}}, "state": "OPEN", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2017-02-06T18:28:41.241287+00:00"}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}, {"update": {"description": "[sdformat-ci-default-trusty-amd64 #47](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/47) failed because it attempted to install packages with out of date package lists. (see #100)\r\n\r\nThis PR squashes `apt-get update` into the same layer as `apt-get install`. I also squashed the `echo` statments that are being used to invalidate the cache, and added `apt-get clean` to remove the downloaded .deb files to reduce the layer size.\r\n\r\nThis branch passed testing of [sdformat-ci-default-trusty-amd64 #48](http://build.osrfoundation.org/view/main/view/BuildCopTests/job/sdformat-ci-default-trusty-amd64/48/console)", "title": "Squashed layers, packages get be installed with current package lists", "destination": {"commit": {"hash": "bc94cab07594", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/bc94cab07594.json"}, "html": {"href": "#!/osrf/release-tools/commits/bc94cab07594"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4ee27b4fbc6c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/4ee27b4fbc6c.json"}, "html": {"href": "#!/osrf/release-tools/commits/4ee27b4fbc6c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "cached_cache_mismatch"}}, "state": "OPEN", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "date": "2017-02-06T18:28:41.215764+00:00"}, "pull_request": {"type": "pullrequest", "id": 369, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/369.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/369"}}, "title": "Squashed layers, packages are installed with current package lists"}}]}