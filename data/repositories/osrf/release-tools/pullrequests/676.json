{"rendered": {"description": {"raw": "The goal here is to use the official brew tools a bit more, and it eliminates some of the custom code we were using for updating bottle hashes. In order to do this, it's much easier if the bottles all have the same `root_url`, so I've changed it to http://gazebosim.org/distributions/bottles-simulation in the bottle creation script, which passes it to `brew test-bot`. The root_url is then saved in the bottle json files, which are used by `brew bottle --merge --write` to update the bottle hashes. The json files are also used by the repository_uploader to know where to upload them.\r\n\r\nI've tested this with the following pull request:\r\n\r\n* https://github.com/osrf/homebrew-simulation/pull/511\r\n* https://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/17/\r\n* https://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/581/\r\n* https://build.osrfoundation.org/job/repository_uploader_ng/5958/", "markup": "markdown", "html": "<p>The goal here is to use the official brew tools a bit more, and it eliminates some of the custom code we were using for updating bottle hashes. In order to do this, it's much easier if the bottles all have the same <code>root_url</code>, so I've changed it to <a href=\"http://gazebosim.org/distributions/bottles-simulation\" rel=\"nofollow\" class=\"ap-connect-link\">http://gazebosim.org/distributions/bottles-simulation</a> in the bottle creation script, which passes it to <code>brew test-bot</code>. The root_url is then saved in the bottle json files, which are used by <code>brew bottle --merge --write</code> to update the bottle hashes. The json files are also used by the repository_uploader to know where to upload them.</p>\n<p>I've tested this with the following pull request:</p>\n<ul>\n<li><a href=\"https://github.com/osrf/homebrew-simulation/pull/511\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/osrf/homebrew-simulation/pull/511</a></li>\n<li><a href=\"https://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/17/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/17/</a></li>\n<li><a href=\"https://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/581/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/581/</a></li>\n<li><a href=\"https://build.osrfoundation.org/job/repository_uploader_ng/5958/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/repository_uploader_ng/5958/</a></li>\n</ul>", "type": "rendered"}, "title": {"raw": "Use single root_url for brew bottles, use brew bottle --merge --write", "markup": "markdown", "html": "<p>Use single root_url for brew bottles, use brew bottle --merge --write</p>", "type": "rendered"}}, "type": "pullrequest", "description": "The goal here is to use the official brew tools a bit more, and it eliminates some of the custom code we were using for updating bottle hashes. In order to do this, it's much easier if the bottles all have the same `root_url`, so I've changed it to http://gazebosim.org/distributions/bottles-simulation in the bottle creation script, which passes it to `brew test-bot`. The root_url is then saved in the bottle json files, which are used by `brew bottle --merge --write` to update the bottle hashes. The json files are also used by the repository_uploader to know where to upload them.\r\n\r\nI've tested this with the following pull request:\r\n\r\n* https://github.com/osrf/homebrew-simulation/pull/511\r\n* https://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/17/\r\n* https://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/581/\r\n* https://build.osrfoundation.org/job/repository_uploader_ng/5958/", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/676/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/diffstat/osrf/release-tools:c76ff6cb05fd%0D3eceb930e8fe?from_pullrequest_id=676"}, "commits": {"href": "data/repositories/osrf/release-tools/pullrequests/676/commits.json"}, "self": {"href": "data/repositories/osrf/release-tools/pullrequests/676.json"}, "comments": {"href": "data/repositories/osrf/release-tools/pullrequests/676/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/676/merge"}, "html": {"href": "#!/osrf/release-tools/pull-requests/676"}, "activity": {"href": "data/repositories/osrf/release-tools/pullrequests/676/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/diff/osrf/release-tools:c76ff6cb05fd%0D3eceb930e8fe?from_pullrequest_id=676"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/676/approve"}, "statuses": {"href": "data/repositories/osrf/release-tools/pullrequests/676/statuses_page=1.json"}}, "title": "Use single root_url for brew bottles, use brew bottle --merge --write", "close_source_branch": true, "reviewers": [{"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}], "id": 676, "destination": {"commit": {"hash": "3eceb930e8fe", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/3eceb930e8fe.json"}, "html": {"href": "#!/osrf/release-tools/commits/3eceb930e8fe"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "created_on": "2018-10-15T20:18:35.020102+00:00", "summary": {"raw": "The goal here is to use the official brew tools a bit more, and it eliminates some of the custom code we were using for updating bottle hashes. In order to do this, it's much easier if the bottles all have the same `root_url`, so I've changed it to http://gazebosim.org/distributions/bottles-simulation in the bottle creation script, which passes it to `brew test-bot`. The root_url is then saved in the bottle json files, which are used by `brew bottle --merge --write` to update the bottle hashes. The json files are also used by the repository_uploader to know where to upload them.\r\n\r\nI've tested this with the following pull request:\r\n\r\n* https://github.com/osrf/homebrew-simulation/pull/511\r\n* https://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/17/\r\n* https://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/581/\r\n* https://build.osrfoundation.org/job/repository_uploader_ng/5958/", "markup": "markdown", "html": "<p>The goal here is to use the official brew tools a bit more, and it eliminates some of the custom code we were using for updating bottle hashes. In order to do this, it's much easier if the bottles all have the same <code>root_url</code>, so I've changed it to <a href=\"http://gazebosim.org/distributions/bottles-simulation\" rel=\"nofollow\" class=\"ap-connect-link\">http://gazebosim.org/distributions/bottles-simulation</a> in the bottle creation script, which passes it to <code>brew test-bot</code>. The root_url is then saved in the bottle json files, which are used by <code>brew bottle --merge --write</code> to update the bottle hashes. The json files are also used by the repository_uploader to know where to upload them.</p>\n<p>I've tested this with the following pull request:</p>\n<ul>\n<li><a href=\"https://github.com/osrf/homebrew-simulation/pull/511\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/osrf/homebrew-simulation/pull/511</a></li>\n<li><a href=\"https://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/17/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/17/</a></li>\n<li><a href=\"https://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/581/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/581/</a></li>\n<li><a href=\"https://build.osrfoundation.org/job/repository_uploader_ng/5958/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/repository_uploader_ng/5958/</a></li>\n</ul>", "type": "rendered"}, "source": {"commit": {"hash": "7586f1df08b8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/7586f1df08b8.json"}, "html": {"href": "#!/osrf/release-tools/commits/7586f1df08b8"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "brew_root_url_upload"}}, "comment_count": 1, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2018-10-16T15:18:05.137756+00:00", "type": "participant", "approved": true, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}], "reason": "", "updated_on": "2018-10-16T19:17:15.160250+00:00", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "merge_commit": {"hash": "c76ff6cb05fd", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/c76ff6cb05fd.json"}, "html": {"href": "#!/osrf/release-tools/commits/c76ff6cb05fd"}}}, "closed_by": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}