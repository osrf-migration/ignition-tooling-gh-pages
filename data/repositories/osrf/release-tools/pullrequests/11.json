{"rendered": {"description": {"raw": "This pull request implements the support for installing proper DRI packages inside the pbuilder (chroot) environment. The problem is that to get proper DRI support inside a chroot, the chroot should have the same kernel DRI support installed that one running in the host machine.\r\n\r\nCode to detect Nvidia packages installed (could be nvidia-{number}, nvidia-current, ...) is a bit hacky but seems to work. At the moment detecting ATI will imply to install fglrx (it can be improve in the future).\r\n\r\nInstalling the proper packages to get support seems to fix most of our issue with graphical tests failing in jenkins: \r\n\r\n* See [testing case for gazebo_1.5 in vrc_real machine](http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-vrc/4/console)\r\n* See [testing case for gazebo_1.5 in ati machine](http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-ati/1/console)\r\n* Experimental case for [drcsim default using gazebo default](http://build.osrfoundation.org/job/drcsim-default-gazebo-default-glsupport-precise-amd64/6/console)", "markup": "markdown", "html": "<p>This pull request implements the support for installing proper DRI packages inside the pbuilder (chroot) environment. The problem is that to get proper DRI support inside a chroot, the chroot should have the same kernel DRI support installed that one running in the host machine.</p>\n<p>Code to detect Nvidia packages installed (could be nvidia-{number}, nvidia-current, ...) is a bit hacky but seems to work. At the moment detecting ATI will imply to install fglrx (it can be improve in the future).</p>\n<p>Installing the proper packages to get support seems to fix most of our issue with graphical tests failing in jenkins: </p>\n<ul>\n<li>See <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-vrc/4/console\" rel=\"nofollow\">testing case for gazebo_1.5 in vrc_real machine</a></li>\n<li>See <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-ati/1/console\" rel=\"nofollow\">testing case for gazebo_1.5 in ati machine</a></li>\n<li>Experimental case for <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/drcsim-default-gazebo-default-glsupport-precise-amd64/6/console\" rel=\"nofollow\">drcsim default using gazebo default</a></li>\n</ul>", "type": "rendered"}, "title": {"raw": "Install proper DRI support for jenkins pbuilders (build.sh)", "markup": "markdown", "html": "<p>Install proper DRI support for jenkins pbuilders (build.sh)</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This pull request implements the support for installing proper DRI packages inside the pbuilder (chroot) environment. The problem is that to get proper DRI support inside a chroot, the chroot should have the same kernel DRI support installed that one running in the host machine.\r\n\r\nCode to detect Nvidia packages installed (could be nvidia-{number}, nvidia-current, ...) is a bit hacky but seems to work. At the moment detecting ATI will imply to install fglrx (it can be improve in the future).\r\n\r\nInstalling the proper packages to get support seems to fix most of our issue with graphical tests failing in jenkins: \r\n\r\n* See [testing case for gazebo_1.5 in vrc_real machine](http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-vrc/4/console)\r\n* See [testing case for gazebo_1.5 in ati machine](http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-ati/1/console)\r\n* Experimental case for [drcsim default using gazebo default](http://build.osrfoundation.org/job/drcsim-default-gazebo-default-glsupport-precise-amd64/6/console)", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/11/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/diffstat/osrf/release-tools:c23bec0eb6a8%0Dca3dec3c7cfe?from_pullrequest_id=11"}, "commits": {"href": "data/repositories/osrf/release-tools/pullrequests/11/commits.json"}, "self": {"href": "data/repositories/osrf/release-tools/pullrequests/11.json"}, "comments": {"href": "data/repositories/osrf/release-tools/pullrequests/11/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/11/merge"}, "html": {"href": "#!/osrf/release-tools/pull-requests/11"}, "activity": {"href": "data/repositories/osrf/release-tools/pullrequests/11/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/diff/osrf/release-tools:c23bec0eb6a8%0Dca3dec3c7cfe?from_pullrequest_id=11"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/11/approve"}, "statuses": {"href": "data/repositories/osrf/release-tools/pullrequests/11/statuses_page=1.json"}}, "title": "Install proper DRI support for jenkins pbuilders (build.sh)", "close_source_branch": true, "reviewers": [{"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}], "id": 11, "destination": {"commit": {"hash": "ca3dec3c7cfe", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/ca3dec3c7cfe.json"}, "html": {"href": "#!/osrf/release-tools/commits/ca3dec3c7cfe"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "created_on": "2013-03-06T21:48:24.829575+00:00", "summary": {"raw": "This pull request implements the support for installing proper DRI packages inside the pbuilder (chroot) environment. The problem is that to get proper DRI support inside a chroot, the chroot should have the same kernel DRI support installed that one running in the host machine.\r\n\r\nCode to detect Nvidia packages installed (could be nvidia-{number}, nvidia-current, ...) is a bit hacky but seems to work. At the moment detecting ATI will imply to install fglrx (it can be improve in the future).\r\n\r\nInstalling the proper packages to get support seems to fix most of our issue with graphical tests failing in jenkins: \r\n\r\n* See [testing case for gazebo_1.5 in vrc_real machine](http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-vrc/4/console)\r\n* See [testing case for gazebo_1.5 in ati machine](http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-ati/1/console)\r\n* Experimental case for [drcsim default using gazebo default](http://build.osrfoundation.org/job/drcsim-default-gazebo-default-glsupport-precise-amd64/6/console)", "markup": "markdown", "html": "<p>This pull request implements the support for installing proper DRI packages inside the pbuilder (chroot) environment. The problem is that to get proper DRI support inside a chroot, the chroot should have the same kernel DRI support installed that one running in the host machine.</p>\n<p>Code to detect Nvidia packages installed (could be nvidia-{number}, nvidia-current, ...) is a bit hacky but seems to work. At the moment detecting ATI will imply to install fglrx (it can be improve in the future).</p>\n<p>Installing the proper packages to get support seems to fix most of our issue with graphical tests failing in jenkins: </p>\n<ul>\n<li>See <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-vrc/4/console\" rel=\"nofollow\">testing case for gazebo_1.5 in vrc_real machine</a></li>\n<li>See <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/gazebo_1.5/job/gazebo-gazebo_1.5-glsupport-precise-amd64-gpu-ati/1/console\" rel=\"nofollow\">testing case for gazebo_1.5 in ati machine</a></li>\n<li>Experimental case for <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/drcsim-default-gazebo-default-glsupport-precise-amd64/6/console\" rel=\"nofollow\">drcsim default using gazebo default</a></li>\n</ul>", "type": "rendered"}, "source": {"commit": {"hash": "81c0667840cf", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/81c0667840cf.json"}, "html": {"href": "#!/osrf/release-tools/commits/81c0667840cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "gl-chroot-support"}}, "comment_count": 0, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2013-03-06T22:14:55.230555+00:00", "type": "participant", "approved": true, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "REVIEWER", "participated_on": "2013-03-06T22:06:32.915044+00:00", "type": "participant", "approved": true, "user": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}}], "reason": "", "updated_on": "2013-03-07T00:49:31.830199+00:00", "author": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "merge_commit": {"hash": "c23bec0eb6a8", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/c23bec0eb6a8.json"}, "html": {"href": "#!/osrf/release-tools/commits/c23bec0eb6a8"}}}, "closed_by": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}