{"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/222/comments/17311621.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/222/_/diff#comment-17311621"}}, "parent": {"id": 17310010, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/222/comments/17310010.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/222/_/diff#comment-17310010"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 222, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/222.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/222"}}, "title": "Update priority field to new DSL syntax"}, "content": {"raw": "I found:\n\n * The priority set by this PR is correctly translated into the config.xml file present in the machine buildsystem\n * There is a global [\"Job Priorities\"](http://build.osrfoundation.org/view/main/advanced-build-queue/) configuration in the main action menu. I've defined a group which includes all jobs.\n * There is some other general configurations in the Manage menu. I've set up the priorities from 0-1000 and default to 500.\n\nReading the plugin page:\n\n*\"The priority of the Job is then set by the Priority Strategy, each Job Group can have any number Priority Strategies.\"*\n\nIn our case the global strategy is set to \"Absolute\", numbers from lower to higher. Different strategies can be set into the main \"Job Priorities\" action using the option \"Use additional rules when assigning a priority to a Job\".\n\n*\"So when a new Job is Queued the following will happen, Priority Sorter will go though the configured Job Groups from top to bottom.\"*\n\nWe have only one group, including all jobs.\n\n*\"When Priority Sorter find a Job Group where the Job is to be included\"*\n\nthis should happen always to the only one group.\n\n*\"it will look though the Priority Strategies from top to bottom\"*\n\nI've defined the strategy \"Take the priority from Property on the Job\" . That should make that our priorities are taking into consideration.\n\n*\"when it finds a Priority Strategy that matches it will use this strategy to assign a priority the the Job. Priority Sorter will now consult the Queue Strategy to translate the priority to a weight, ie a position in the queue\"*\n\nthat should make that the properties on each job are the values to consider.\n\n\nAfter this setup, I can see the priority option and value set into the GUI for each. For example: http://build.osrfoundation.org/view/All/job/sdformat-abichecker-any_to_any-vivid-amd64/configure", "markup": "markdown", "html": "<p>I found:</p>\n<ul>\n<li>The priority set by this PR is correctly translated into the config.xml file present in the machine buildsystem</li>\n<li>There is a global <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/view/main/advanced-build-queue/\" rel=\"nofollow\">\"Job Priorities\"</a> configuration in the main action menu. I've defined a group which includes all jobs.</li>\n<li>There is some other general configurations in the Manage menu. I've set up the priorities from 0-1000 and default to 500.</li>\n</ul>\n<p>Reading the plugin page:</p>\n<p><em>\"The priority of the Job is then set by the Priority Strategy, each Job Group can have any number Priority Strategies.\"</em></p>\n<p>In our case the global strategy is set to \"Absolute\", numbers from lower to higher. Different strategies can be set into the main \"Job Priorities\" action using the option \"Use additional rules when assigning a priority to a Job\".</p>\n<p><em>\"So when a new Job is Queued the following will happen, Priority Sorter will go though the configured Job Groups from top to bottom.\"</em></p>\n<p>We have only one group, including all jobs.</p>\n<p><em>\"When Priority Sorter find a Job Group where the Job is to be included\"</em></p>\n<p>this should happen always to the only one group.</p>\n<p><em>\"it will look though the Priority Strategies from top to bottom\"</em></p>\n<p>I've defined the strategy \"Take the priority from Property on the Job\" . That should make that our priorities are taking into consideration.</p>\n<p><em>\"when it finds a Priority Strategy that matches it will use this strategy to assign a priority the the Job. Priority Sorter will now consult the Queue Strategy to translate the priority to a weight, ie a position in the queue\"</em></p>\n<p>that should make that the properties on each job are the values to consider.</p>\n<p>After this setup, I can see the priority option and value set into the GUI for each. For example: <a href=\"http://build.osrfoundation.org/view/All/job/sdformat-abichecker-any_to_any-vivid-amd64/configure\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/view/All/job/sdformat-abichecker-any_to_any-vivid-amd64/configure</a></p>", "type": "rendered"}, "created_on": "2016-04-15T16:34:27.061202+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2016-04-15T16:34:27.064960+00:00", "type": "pullrequest_comment", "id": 17311621}