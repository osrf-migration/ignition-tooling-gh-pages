{"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/125/comments/10897617.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/125/_/diff#comment-10897617"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 125, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/125.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/125"}}, "title": "Compute sha256 for generated tarballs and pass to jenkins jobs"}, "content": {"raw": "I've been tinkering with bottles, and I believe these need to be built in a clean environment so you don't accidentally find optional dependencies (like dartsim) and have unresolved symbols at runtime. I'm currently using a virtual machine. It would be nice to be able to use our jenkins nodes as well.\n\nI've discovered two cool `brew` commands:\n\n~~~\n# this will pull and commit the code in a specified pull request\nbrew pull https://github.com/osrf/homebrew-simulation/pull/52\n~~~\n\n~~~\n# if you want to build a bottle in our tap:\n# it won't build though if the pull request has already been merged\n# also, I had trouble using the `--keep-old` option, since it tries to insert a bintray `root_url`\nbrew test-bot \\\n  --tap=osrf/simulation \\\n  --bottle \\\n  --ci-pr \\\n  --verbose \\\n  https://github.com/osrf/homebrew-simulation/pull/52\n~~~\n\nI used this to build a bottle for gazebo 6.4.0 and it seems to work.", "markup": "markdown", "html": "<p>I've been tinkering with bottles, and I believe these need to be built in a clean environment so you don't accidentally find optional dependencies (like dartsim) and have unresolved symbols at runtime. I'm currently using a virtual machine. It would be nice to be able to use our jenkins nodes as well.</p>\n<p>I've discovered two cool <code>brew</code> commands:</p>\n<div class=\"codehilite\"><pre><span></span># this will pull and commit the code in a specified pull request\nbrew pull https://github.com/osrf/homebrew-simulation/pull/52\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span># if you want to build a bottle in our tap:\n# it won&#39;t build though if the pull request has already been merged\n# also, I had trouble using the `--keep-old` option, since it tries to insert a bintray `root_url`\nbrew test-bot \\\n  --tap=osrf/simulation \\\n  --bottle \\\n  --ci-pr \\\n  --verbose \\\n  https://github.com/osrf/homebrew-simulation/pull/52\n</pre></div>\n\n\n<p>I used this to build a bottle for gazebo 6.4.0 and it seems to work.</p>", "type": "rendered"}, "created_on": "2015-10-16T23:22:09.348051+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2015-10-16T23:22:09.351615+00:00", "type": "pullrequest_comment", "id": 10897617}