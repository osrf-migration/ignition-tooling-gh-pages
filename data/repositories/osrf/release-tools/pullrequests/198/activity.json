{"pagelen": 50, "values": [{"update": {"description": "When running a test multiple times, a flaky test will sometimes pass and sometimes fail. Some build tools (such as [maven](https://github.com/apache/maven-surefire/commit/fefaae7f0534a59f52c046a64c96987e8561dd48)) have been adding support for reporting flaky test failures in junit xml files using a `<flakyFailure>` element instead of a `<failure>` element. I've [requested this feature for gtest](https://github.com/google/googletest/issues/727), but in the meantime, I've written a python script that reads two junit files and writes a merged junit file with `<failure>` tags converted to `<flakyFailure>` tags.\r\n\r\nI've also attached some example junit files taken from results of an intentionally flaky test (see [ign-math d22d516a03](https://bitbucket.org/ignitionrobotics/ign-math/commits/d22d516a038c2aa691b569b3386322c738a1c6c7?at=flaky_rand_test)).\r\n\r\n~~~\r\npython flaky_junit_merge.py flaky_xml/input1.xml flaky_xml/input2.xml > flaky_xml/output12.xml\r\npython flaky_junit_merge.py flaky_xml/input2.xml flaky_xml/input1.xml > flaky_xml/output21.xml\r\n~~~\r\n\r\nI'll make a PR for integrating with build scripts later. In the meantime, here's a sneak peak of jenkins reporting of flaky tests:\r\n\r\n* http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/ignition_math-ci-pr_any-homebrew-amd64/45/testReport/(root)/", "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml", "destination": {"commit": {"hash": "a345277f5282", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/a345277f5282.json"}, "html": {"href": "#!/osrf/release-tools/commits/a345277f5282"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "2e01c44d6e76", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/2e01c44d6e76.json"}, "html": {"href": "#!/osrf/release-tools/commits/2e01c44d6e76"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "flaky_junit_merge"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-03-11T16:11:29.688119+00:00"}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15650577.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15650577"}}, "parent": {"id": 15640927, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15640927.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15640927"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}, "content": {"raw": "sure, I'll merge now", "markup": "markdown", "html": "<p>sure, I'll merge now</p>", "type": "rendered"}, "created_on": "2016-03-11T16:11:22.726104+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-03-11T16:11:22.731640+00:00", "type": "pullrequest_comment", "id": 15650577}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15640927.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15640927"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}, "content": {"raw": "@scpeters ready to merge, right?", "markup": "markdown", "html": "<p>@scpeters ready to merge, right?</p>", "type": "rendered"}, "created_on": "2016-03-11T13:02:23.487200+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2016-03-11T13:02:23.499019+00:00", "type": "pullrequest_comment", "id": 15640927}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15620985.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15620985"}}, "parent": {"id": 15499281, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15499281.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15499281"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}, "content": {"raw": "comments added in 2e01c44", "markup": "markdown", "html": "<p>comments added in <a href=\"#!/osrf/release-tools/commits/2e01c44\" rel=\"nofollow\" class=\"ap-connect-link\">2e01c44</a></p>", "type": "rendered"}, "created_on": "2016-03-11T02:08:59.902779+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2016-03-11T02:08:59.905047+00:00", "type": "pullrequest_comment", "id": 15620985}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"update": {"description": "When running a test multiple times, a flaky test will sometimes pass and sometimes fail. Some build tools (such as [maven](https://github.com/apache/maven-surefire/commit/fefaae7f0534a59f52c046a64c96987e8561dd48)) have been adding support for reporting flaky test failures in junit xml files using a `<flakyFailure>` element instead of a `<failure>` element. I've [requested this feature for gtest](https://github.com/google/googletest/issues/727), but in the meantime, I've written a python script that reads two junit files and writes a merged junit file with `<failure>` tags converted to `<flakyFailure>` tags.\r\n\r\nI've also attached some example junit files taken from results of an intentionally flaky test (see [ign-math d22d516a03](https://bitbucket.org/ignitionrobotics/ign-math/commits/d22d516a038c2aa691b569b3386322c738a1c6c7?at=flaky_rand_test)).\r\n\r\n~~~\r\npython flaky_junit_merge.py flaky_xml/input1.xml flaky_xml/input2.xml > flaky_xml/output12.xml\r\npython flaky_junit_merge.py flaky_xml/input2.xml flaky_xml/input1.xml > flaky_xml/output21.xml\r\n~~~\r\n\r\nI'll make a PR for integrating with build scripts later. In the meantime, here's a sneak peak of jenkins reporting of flaky tests:\r\n\r\n* http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/ignition_math-ci-pr_any-homebrew-amd64/45/testReport/(root)/", "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml", "destination": {"commit": {"hash": "a345277f5282", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/a345277f5282.json"}, "html": {"href": "#!/osrf/release-tools/commits/a345277f5282"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "2e01c44d6e76", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/2e01c44d6e76.json"}, "html": {"href": "#!/osrf/release-tools/commits/2e01c44d6e76"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "flaky_junit_merge"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-03-11T02:08:28.791161+00:00"}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15499281.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15499281"}}, "parent": {"id": 15498920, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15498920.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15498920"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}, "content": {"raw": "When merging the files, one may have a failure and other passes.\n\n* For the failing file, I covert the `<failure>` tag to `<flakyFailure>` (lines 40, 48) and subtract 1 from the count of failures\n* For the passing file, I append the `<flakyFailure>` node to the relevant testcase.\n\nThis script modifies both files, and in theory either one could be printed. I chose to print the first one, but the second one could also be printed. I'll add this explanation as a comment inside the code", "markup": "markdown", "html": "<p>When merging the files, one may have a failure and other passes.</p>\n<ul>\n<li>For the failing file, I covert the <code>&lt;failure&gt;</code> tag to <code>&lt;flakyFailure&gt;</code> (lines 40, 48) and subtract 1 from the count of failures</li>\n<li>For the passing file, I append the <code>&lt;flakyFailure&gt;</code> node to the relevant testcase.</li>\n</ul>\n<p>This script modifies both files, and in theory either one could be printed. I chose to print the first one, but the second one could also be printed. I'll add this explanation as a comment inside the code</p>", "type": "rendered"}, "created_on": "2016-03-09T02:03:12.335004+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2016-03-09T02:03:12.338097+00:00", "type": "pullrequest_comment", "id": 15499281}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"approval": {"date": "2016-03-09T01:48:12.557825+00:00", "pullrequest": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15498942.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15498942"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}, "content": {"raw": "I've been able to run the scripts without major problem, looks good to me. Nice work!", "markup": "markdown", "html": "<p>I've been able to run the scripts without major problem, looks good to me. Nice work!</p>", "type": "rendered"}, "created_on": "2016-03-09T01:48:10.409837+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2016-03-09T01:48:10.411948+00:00", "type": "pullrequest_comment", "id": 15498942}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15498920.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15498920"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}, "content": {"raw": "this last final line, is there intentionally?", "markup": "markdown", "html": "<p>this last final line, is there intentionally?</p>", "type": "rendered"}, "created_on": "2016-03-09T01:46:57.835627+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2016-03-09T01:46:57.842805+00:00", "type": "pullrequest_comment", "id": 15498920}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15356063.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15356063"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}, "content": {"raw": "Related to #60", "markup": "markdown", "html": "<p>Related to <a href=\"#!/osrf/release-tools/issues/60/repeat-failed-tests-to-identify-flaky-ones\" rel=\"nofollow\" title=\"Repeat failed tests to identify flaky ones?\" class=\"ap-connect-link\">#60</a></p>", "type": "rendered"}, "created_on": "2016-03-04T21:19:24.270241+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-03-04T21:19:24.277938+00:00", "type": "pullrequest_comment", "id": 15356063}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"update": {"description": "When running a test multiple times, a flaky test will sometimes pass and sometimes fail. Some build tools (such as [maven](https://github.com/apache/maven-surefire/commit/fefaae7f0534a59f52c046a64c96987e8561dd48)) have been adding support for reporting flaky test failures in junit xml files using a `<flakyFailure>` element instead of a `<failure>` element. I've [requested this feature for gtest](https://github.com/google/googletest/issues/727), but in the meantime, I've written a python script that reads two junit files and writes a merged junit file with `<failure>` tags converted to `<flakyFailure>` tags.\r\n\r\nI've also attached some example junit files taken from results of an intentionally flaky test (see [ign-math d22d516a03](https://bitbucket.org/ignitionrobotics/ign-math/commits/d22d516a038c2aa691b569b3386322c738a1c6c7?at=flaky_rand_test)).\r\n\r\n~~~\r\npython flaky_junit_merge.py flaky_xml/input1.xml flaky_xml/input2.xml > flaky_xml/output12.xml\r\npython flaky_junit_merge.py flaky_xml/input2.xml flaky_xml/input1.xml > flaky_xml/output21.xml\r\n~~~\r\n\r\nI'll make a PR for integrating with build scripts later. In the meantime, here's a sneak peak of jenkins reporting of flaky tests:\r\n\r\n* http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/ignition_math-ci-pr_any-homebrew-amd64/45/testReport/(root)/", "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml", "destination": {"commit": {"hash": "dbb730929a32", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/dbb730929a32.json"}, "html": {"href": "#!/osrf/release-tools/commits/dbb730929a32"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4a1e16d57cd6", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/4a1e16d57cd6.json"}, "html": {"href": "#!/osrf/release-tools/commits/4a1e16d57cd6"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "flaky_junit_merge"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-03-04T11:05:33.883447+00:00"}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198/comments/15326617.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198/_/diff#comment-15326617"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}, "content": {"raw": "requires `lxml` python module", "markup": "markdown", "html": "<p>requires <code>lxml</code> python module</p>", "type": "rendered"}, "created_on": "2016-03-04T10:58:47.752959+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-03-04T10:58:47.758466+00:00", "type": "pullrequest_comment", "id": 15326617}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"update": {"description": "When running a test multiple times, a flaky test will sometimes pass and sometimes fail. Some build tools (such as [maven](https://github.com/apache/maven-surefire/commit/fefaae7f0534a59f52c046a64c96987e8561dd48)) have been adding support for reporting flaky test failures in junit xml files using a `<flakyFailure>` element instead of a `<failure>` element. I've [requested this feature for gtest](https://github.com/google/googletest/issues/727), but in the meantime, I've written a python script that reads two junit files and writes a merged junit file with `<failure>` tags converted to `<flakyFailure>` tags.\r\n\r\nI've also attached some example junit files taken from results of an intentionally flaky test (see [ign-math d22d516a03](https://bitbucket.org/ignitionrobotics/ign-math/commits/d22d516a038c2aa691b569b3386322c738a1c6c7?at=flaky_rand_test)).\r\n\r\n~~~\r\npython flaky_junit_merge.py flaky_xml/input1.xml flaky_xml/input2.xml > flaky_xml/output12.xml\r\npython flaky_junit_merge.py flaky_xml/input2.xml flaky_xml/input1.xml > flaky_xml/output21.xml\r\n~~~\r\n\r\nI'll make a PR for integrating with build scripts later. In the meantime, here's a sneak peak of jenkins reporting of flaky tests:\r\n\r\n* http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/ignition_math-ci-pr_any-homebrew-amd64/45/testReport/(root)/", "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml", "destination": {"commit": {"hash": "dbb730929a32", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/dbb730929a32.json"}, "html": {"href": "#!/osrf/release-tools/commits/dbb730929a32"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b481a6a55192", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/b481a6a55192.json"}, "html": {"href": "#!/osrf/release-tools/commits/b481a6a55192"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "flaky_junit_merge"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-03-04T10:57:50.127872+00:00"}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}, {"update": {"description": "When running a test multiple times, a flaky test will sometimes pass and sometimes fail. Some build tools (such as [maven](https://github.com/apache/maven-surefire/commit/fefaae7f0534a59f52c046a64c96987e8561dd48)) have been adding support for reporting flaky test failures in junit xml files using a `<flakyFailure>` element instead of a `<failure>` element. I've [requested this feature for gtest](https://github.com/google/googletest/issues/727), but in the meantime, I've written a python script that reads two junit files and writes a merged junit file with `<failure>` tags converted to `<flakyFailure>` tags.\r\n\r\nI've also attached some example junit files taken from results of an intentionally flaky test (see [ign-math d22d516a03](https://bitbucket.org/ignitionrobotics/ign-math/commits/d22d516a038c2aa691b569b3386322c738a1c6c7?at=flaky_rand_test)).\r\n\r\n~~~\r\npython flaky_junit_merge.py flaky_xml/input1.xml flaky_xml/input2.xml > flaky_xml/output12.xml\r\npython flaky_junit_merge.py flaky_xml/input2.xml flaky_xml/input1.xml > flaky_xml/output21.xml\r\n~~~\r\n\r\nI'll make a PR for integrating with build scripts later. In the meantime, here's a sneak peak of jenkins reporting of flaky tests:\r\n\r\n* http://build.osrfoundation.org/view/main/view/CI%20any%20jobs/job/ignition_math-ci-pr_any-homebrew-amd64/45/testReport/(root)/", "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml", "destination": {"commit": {"hash": "dbb730929a32", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/dbb730929a32.json"}, "html": {"href": "#!/osrf/release-tools/commits/dbb730929a32"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b481a6a55192", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/b481a6a55192.json"}, "html": {"href": "#!/osrf/release-tools/commits/b481a6a55192"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "flaky_junit_merge"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-03-04T10:57:50.084693+00:00"}, "pull_request": {"type": "pullrequest", "id": 198, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/198.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/198"}}, "title": "Add script for merging junit xml files to identify flaky test failures, along with example xml"}}]}