{"rendered": {"description": {"raw": "Auto remove old copies of nightly packages keeping latest three.\r\n\r\nWe only need to remove the .deb from assets directory since we don't upload tarballs (obviously) and reprepro takes care of remove previous copy of a package when uploading a new one.\r\n\r\nAbout this pull request, note that only after a scp, we get old copies of current package being aware of ARCH and DISTRO and remove them.\r\n\r\nA couple of tricks used:\r\n\r\n1. Extra grep to check for nightly substring inside package alias. This is an extra check but I don't want to remove something which shouldn't. \r\n1. ``ls -t`` to order by filesystem time instead of  trust on filenames.\r\n\r\nAnd I know that this code duplication starts to look like need a refactor, yes, it is in my todo list.", "markup": "markdown", "html": "<p>Auto remove old copies of nightly packages keeping latest three.</p>\n<p>We only need to remove the .deb from assets directory since we don't upload tarballs (obviously) and reprepro takes care of remove previous copy of a package when uploading a new one.</p>\n<p>About this pull request, note that only after a scp, we get old copies of current package being aware of ARCH and DISTRO and remove them.</p>\n<p>A couple of tricks used:</p>\n<ol>\n<li>Extra grep to check for nightly substring inside package alias. This is an extra check but I don't want to remove something which shouldn't. </li>\n<li><code>ls -t</code> to order by filesystem time instead of  trust on filenames.</li>\n</ol>\n<p>And I know that this code duplication starts to look like need a refactor, yes, it is in my todo list.</p>", "type": "rendered"}, "title": {"raw": "Auto remove old nightly packages copies", "markup": "markdown", "html": "<p>Auto remove old nightly packages copies</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Auto remove old copies of nightly packages keeping latest three.\r\n\r\nWe only need to remove the .deb from assets directory since we don't upload tarballs (obviously) and reprepro takes care of remove previous copy of a package when uploading a new one.\r\n\r\nAbout this pull request, note that only after a scp, we get old copies of current package being aware of ARCH and DISTRO and remove them.\r\n\r\nA couple of tricks used:\r\n\r\n1. Extra grep to check for nightly substring inside package alias. This is an extra check but I don't want to remove something which shouldn't. \r\n1. ``ls -t`` to order by filesystem time instead of  trust on filenames.\r\n\r\nAnd I know that this code duplication starts to look like need a refactor, yes, it is in my todo list.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/16/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/diffstat/osrf/release-tools:e2a17e52cd8d%0Ddf466594809e?from_pullrequest_id=16"}, "commits": {"href": "data/repositories/osrf/release-tools/pullrequests/16/commits.json"}, "self": {"href": "data/repositories/osrf/release-tools/pullrequests/16.json"}, "comments": {"href": "data/repositories/osrf/release-tools/pullrequests/16/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/16/merge"}, "html": {"href": "#!/osrf/release-tools/pull-requests/16"}, "activity": {"href": "data/repositories/osrf/release-tools/pullrequests/16/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/diff/osrf/release-tools:e2a17e52cd8d%0Ddf466594809e?from_pullrequest_id=16"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/16/approve"}, "statuses": {"href": "data/repositories/osrf/release-tools/pullrequests/16/statuses_page=1.json"}}, "title": "Auto remove old nightly packages copies", "close_source_branch": true, "reviewers": [{"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}], "id": 16, "destination": {"commit": {"hash": "df466594809e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/df466594809e.json"}, "html": {"href": "#!/osrf/release-tools/commits/df466594809e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "created_on": "2013-03-16T01:12:29.872481+00:00", "summary": {"raw": "Auto remove old copies of nightly packages keeping latest three.\r\n\r\nWe only need to remove the .deb from assets directory since we don't upload tarballs (obviously) and reprepro takes care of remove previous copy of a package when uploading a new one.\r\n\r\nAbout this pull request, note that only after a scp, we get old copies of current package being aware of ARCH and DISTRO and remove them.\r\n\r\nA couple of tricks used:\r\n\r\n1. Extra grep to check for nightly substring inside package alias. This is an extra check but I don't want to remove something which shouldn't. \r\n1. ``ls -t`` to order by filesystem time instead of  trust on filenames.\r\n\r\nAnd I know that this code duplication starts to look like need a refactor, yes, it is in my todo list.", "markup": "markdown", "html": "<p>Auto remove old copies of nightly packages keeping latest three.</p>\n<p>We only need to remove the .deb from assets directory since we don't upload tarballs (obviously) and reprepro takes care of remove previous copy of a package when uploading a new one.</p>\n<p>About this pull request, note that only after a scp, we get old copies of current package being aware of ARCH and DISTRO and remove them.</p>\n<p>A couple of tricks used:</p>\n<ol>\n<li>Extra grep to check for nightly substring inside package alias. This is an extra check but I don't want to remove something which shouldn't. </li>\n<li><code>ls -t</code> to order by filesystem time instead of  trust on filenames.</li>\n</ol>\n<p>And I know that this code duplication starts to look like need a refactor, yes, it is in my todo list.</p>", "type": "rendered"}, "source": {"commit": {"hash": "2b9bff03e033", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/2b9bff03e033.json"}, "html": {"href": "#!/osrf/release-tools/commits/2b9bff03e033"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "remove-old-nightly-packages"}}, "comment_count": 1, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2013-07-01T16:34:05.966275+00:00", "type": "participant", "approved": false, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}}], "reason": "", "updated_on": "2013-07-01T16:34:14.039865+00:00", "author": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "merge_commit": {"hash": "e2a17e52cd8d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/e2a17e52cd8d.json"}, "html": {"href": "#!/osrf/release-tools/commits/e2a17e52cd8d"}}}, "closed_by": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}