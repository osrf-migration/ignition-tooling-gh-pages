{"pagelen": 50, "values": [{"update": {"description": "I wanted to test building the homebrew bottles after pull request #250 was merged, and I found that some recent changes to upstream homebrew require us to make some changes (ie. broke things).\r\n\r\nThe simplest one is that the `HOMEBREW_DEVELOPER` environment variables must be set in order to use `brew test-bot` ([brew pr 298](https://github.com/Homebrew/brew/pull/298)), fixed in 67854f0.\r\n\r\nA slightly more complicated change is that bottle metadata is now stored in a `.json` file instead of `.rb` ([brew pr 166](https://github.com/Homebrew/brew/pull/166)). This requires changing the `*.rb` to `*.json` in the dsl and changing how we identify the new hash (now using `brew ruby` instead of `grep | sed`).\r\n\r\nI tested all these changes with the [sdformat 4.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/100):\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/28/) successful\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/40/) made a successful commit, but failed when trying to create a new pull request, even though one was already open\r\n\r\nIn 24f8387, we started checking the `PULL_REQUEST_URL` variable in the `_homebrew_github_commit.bash` script to see if a new PR should be created, but that variable stopped getting propagated to the PR hash updater at some point. So I've restored that variable in the dsl for the pr bottle hash updater job in 482cd6d.\r\n\r\nI tested the changes end-to-end on the [gazebo7 7.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/93), and it all worked!\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/29/)\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/41/)", "title": "Fix bottle building", "destination": {"commit": {"hash": "02e0bf1ee0ed", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/02e0bf1ee0ed.json"}, "html": {"href": "#!/osrf/release-tools/commits/02e0bf1ee0ed"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "c60accdc5bc7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/c60accdc5bc7.json"}, "html": {"href": "#!/osrf/release-tools/commits/c60accdc5bc7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "homebrew_testbot_env"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-06-06T22:49:55.271693+00:00"}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"approval": {"date": "2016-06-06T22:47:54.348839+00:00", "pullrequest": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253/comments/19398918.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253/_/diff#comment-19398918"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}, "content": {"raw": "Looks good to me, thanks for updating it!", "markup": "markdown", "html": "<p>Looks good to me, thanks for updating it!</p>", "type": "rendered"}, "created_on": "2016-06-06T22:47:52.690939+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2016-06-06T22:47:52.696542+00:00", "type": "pullrequest_comment", "id": 19398918}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253/comments/19398889.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253/_/diff#comment-19398889"}}, "parent": {"id": 19398732, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253/comments/19398732.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253/_/diff#comment-19398732"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}, "content": {"raw": "c60accd", "markup": "markdown", "html": "<p><a href=\"#!/osrf/release-tools/commits/c60accd\" rel=\"nofollow\" class=\"ap-connect-link\">c60accd</a></p>", "type": "rendered"}, "created_on": "2016-06-06T22:46:34.553801+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2016-06-06T22:46:34.556078+00:00", "type": "pullrequest_comment", "id": 19398889}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"update": {"description": "I wanted to test building the homebrew bottles after pull request #250 was merged, and I found that some recent changes to upstream homebrew require us to make some changes (ie. broke things).\r\n\r\nThe simplest one is that the `HOMEBREW_DEVELOPER` environment variables must be set in order to use `brew test-bot` ([brew pr 298](https://github.com/Homebrew/brew/pull/298)), fixed in 67854f0.\r\n\r\nA slightly more complicated change is that bottle metadata is now stored in a `.json` file instead of `.rb` ([brew pr 166](https://github.com/Homebrew/brew/pull/166)). This requires changing the `*.rb` to `*.json` in the dsl and changing how we identify the new hash (now using `brew ruby` instead of `grep | sed`).\r\n\r\nI tested all these changes with the [sdformat 4.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/100):\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/28/) successful\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/40/) made a successful commit, but failed when trying to create a new pull request, even though one was already open\r\n\r\nIn 24f8387, we started checking the `PULL_REQUEST_URL` variable in the `_homebrew_github_commit.bash` script to see if a new PR should be created, but that variable stopped getting propagated to the PR hash updater at some point. So I've restored that variable in the dsl for the pr bottle hash updater job in 482cd6d.\r\n\r\nI tested the changes end-to-end on the [gazebo7 7.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/93), and it all worked!\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/29/)\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/41/)", "title": "Fix bottle building", "destination": {"commit": {"hash": "02e0bf1ee0ed", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/02e0bf1ee0ed.json"}, "html": {"href": "#!/osrf/release-tools/commits/02e0bf1ee0ed"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "c60accdc5bc7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/c60accdc5bc7.json"}, "html": {"href": "#!/osrf/release-tools/commits/c60accdc5bc7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "homebrew_testbot_env"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-06-06T22:46:05.869775+00:00"}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"update": {"description": "I wanted to test building the homebrew bottles after pull request #250 was merged, and I found that some recent changes to upstream homebrew require us to make some changes (ie. broke things).\r\n\r\nThe simplest one is that the `HOMEBREW_DEVELOPER` environment variables must be set in order to use `brew test-bot` ([brew pr 298](https://github.com/Homebrew/brew/pull/298)), fixed in 67854f0.\r\n\r\nA slightly more complicated change is that bottle metadata is now stored in a `.json` file instead of `.rb` ([brew pr 166](https://github.com/Homebrew/brew/pull/166)). This requires changing the `*.rb` to `*.json` in the dsl and changing how we identify the new hash (now using `brew ruby` instead of `grep | sed`).\r\n\r\nI tested all these changes with the [sdformat 4.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/100):\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/28/) successful\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/40/) made a successful commit, but failed when trying to create a new pull request, even though one was already open\r\n\r\nIn 24f8387, we started checking the `PULL_REQUEST_URL` variable in the `_homebrew_github_commit.bash` script to see if a new PR should be created, but that variable stopped getting propagated to the PR hash updater at some point. So I've restored that variable in the dsl for the pr bottle hash updater job in 482cd6d.\r\n\r\nI tested the changes end-to-end on the [gazebo7 7.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/93), and it all worked!\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/29/)\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/41/)", "title": "Fix bottle building", "destination": {"commit": {"hash": "02e0bf1ee0ed", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/02e0bf1ee0ed.json"}, "html": {"href": "#!/osrf/release-tools/commits/02e0bf1ee0ed"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "c60accdc5bc7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/c60accdc5bc7.json"}, "html": {"href": "#!/osrf/release-tools/commits/c60accdc5bc7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "homebrew_testbot_env"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-06-06T22:46:05.599462+00:00"}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253/comments/19398867.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253/_/diff#comment-19398867"}}, "parent": {"id": 19398732, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253/comments/19398732.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253/_/diff#comment-19398732"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}, "content": {"raw": "good point", "markup": "markdown", "html": "<p>good point</p>", "type": "rendered"}, "created_on": "2016-06-06T22:45:26.069274+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2016-06-06T22:45:26.076464+00:00", "type": "pullrequest_comment", "id": 19398867}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253/comments/19398732.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253/_/diff#comment-19398732"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}, "content": {"raw": "we can probably remove this function now that is not being used any more ", "markup": "markdown", "html": "<p>we can probably remove this function now that is not being used any more </p>", "type": "rendered"}, "created_on": "2016-06-06T22:38:55.336974+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2016-06-06T22:38:55.341785+00:00", "type": "pullrequest_comment", "id": 19398732}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253/comments/19333090.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253/_/diff#comment-19333090"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}, "content": {"raw": "Also, the distro is hard-coded to yosemite for now. We'll need to add some extra magic to handle multiple distros, but that will be another day.", "markup": "markdown", "html": "<p>Also, the distro is hard-coded to yosemite for now. We'll need to add some extra magic to handle multiple distros, but that will be another day.</p>", "type": "rendered"}, "created_on": "2016-06-04T00:44:58.726901+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-06-04T00:44:58.732342+00:00", "type": "pullrequest_comment", "id": 19333090}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"update": {"description": "I wanted to test building the homebrew bottles after pull request #250 was merged, and I found that some recent changes to upstream homebrew require us to make some changes (ie. broke things).\r\n\r\nThe simplest one is that the `HOMEBREW_DEVELOPER` environment variables must be set in order to use `brew test-bot` ([brew pr 298](https://github.com/Homebrew/brew/pull/298)), fixed in 67854f0.\r\n\r\nA slightly more complicated change is that bottle metadata is now stored in a `.json` file instead of `.rb` ([brew pr 166](https://github.com/Homebrew/brew/pull/166)). This requires changing the `*.rb` to `*.json` in the dsl and changing how we identify the new hash (now using `brew ruby` instead of `grep | sed`).\r\n\r\nI tested all these changes with the [sdformat 4.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/100):\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/28/) successful\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/40/) made a successful commit, but failed when trying to create a new pull request, even though one was already open\r\n\r\nIn 24f8387, we started checking the `PULL_REQUEST_URL` variable in the `_homebrew_github_commit.bash` script to see if a new PR should be created, but that variable stopped getting propagated to the PR hash updater at some point. So I've restored that variable in the dsl for the pr bottle hash updater job in 482cd6d.\r\n\r\nI tested the changes end-to-end on the [gazebo7 7.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/93), and it all worked!\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/29/)\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/41/)", "title": "Fix bottle building", "destination": {"commit": {"hash": "c63eaf36d8f7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/c63eaf36d8f7.json"}, "html": {"href": "#!/osrf/release-tools/commits/c63eaf36d8f7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "482cd6dd314c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/482cd6dd314c.json"}, "html": {"href": "#!/osrf/release-tools/commits/482cd6dd314c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "homebrew_testbot_env"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-06-04T00:43:43.591038+00:00"}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}, {"update": {"description": "I wanted to test building the homebrew bottles after pull request #250 was merged, and I found that some recent changes to upstream homebrew require us to make some changes (ie. broke things).\r\n\r\nThe simplest one is that the `HOMEBREW_DEVELOPER` environment variables must be set in order to use `brew test-bot` ([brew pr 298](https://github.com/Homebrew/brew/pull/298)), fixed in 67854f0.\r\n\r\nA slightly more complicated change is that bottle metadata is now stored in a `.json` file instead of `.rb` ([brew pr 166](https://github.com/Homebrew/brew/pull/166)). This requires changing the `*.rb` to `*.json` in the dsl and changing how we identify the new hash (now using `brew ruby` instead of `grep | sed`).\r\n\r\nI tested all these changes with the [sdformat 4.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/100):\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/28/) successful\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/40/) made a successful commit, but failed when trying to create a new pull request, even though one was already open\r\n\r\nIn 24f8387, we started checking the `PULL_REQUEST_URL` variable in the `_homebrew_github_commit.bash` script to see if a new PR should be created, but that variable stopped getting propagated to the PR hash updater at some point. So I've restored that variable in the dsl for the pr bottle hash updater job in 482cd6d.\r\n\r\nI tested the changes end-to-end on the [gazebo7 7.1.0 PR](https://github.com/osrf/homebrew-simulation/pull/93), and it all worked!\r\n\r\n* [bottle builder](http://build.osrfoundation.org/job/generic-release-homebrew_bottle_builder/29/)\r\n* [pr bottle hash updater](http://build.osrfoundation.org/job/generic-release-homebrew_pr_bottle_hash_updater/41/)", "title": "Fix bottle building", "destination": {"commit": {"hash": "c63eaf36d8f7", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/c63eaf36d8f7.json"}, "html": {"href": "#!/osrf/release-tools/commits/c63eaf36d8f7"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "482cd6dd314c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/482cd6dd314c.json"}, "html": {"href": "#!/osrf/release-tools/commits/482cd6dd314c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "homebrew_testbot_env"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-06-04T00:43:43.557340+00:00"}, "pull_request": {"type": "pullrequest", "id": 253, "links": {"self": {"href": "data/repositories/osrf/release-tools/pullrequests/253.json"}, "html": {"href": "#!/osrf/release-tools/pull-requests/253"}}, "title": "Fix bottle building"}}]}