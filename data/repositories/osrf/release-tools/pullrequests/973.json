{"rendered": {"description": {"raw": "This solves an error \\` libGL error: failed to load driver: swrast\\` that only seems to happen on `drogon`. As far as I can tell, it looks like it has to do with drogon using `nvidia-docker2`. The nodes using `nvidia-docker` 1 work fine.\r\n\r\nFailing job:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1163/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console)\r\n\r\nSuccessful job with this PR:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1166/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console)\r\n\r\n\u200c\r\n\r\nThis PR installs `libglvnd` inside the docker image, which seems to be what the NVidia images do: [https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile](https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile)\r\n\r\n\u200c\r\n\r\nIt would be nice if this job used osrf/rocker, but that looks like a larger change. [https://github.com/osrf/rocker](https://github.com/osrf/rocker)\r\n\r\n\u200c", "markup": "markdown", "html": "<p>This solves an error ` libGL error: failed to load driver: swrast` that only seems to happen on <code>drogon</code>. As far as I can tell, it looks like it has to do with drogon using <code>nvidia-docker2</code>. The nodes using <code>nvidia-docker</code> 1 work fine.</p>\n<p>Failing job:</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console\" rel=\"nofollow\">https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console</a></p>\n<p>Successful job with this PR:</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console\" rel=\"nofollow\">https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console</a></p>\n<p>\u200c</p>\n<p>This PR installs <code>libglvnd</code> inside the docker image, which seems to be what the NVidia images do: <a data-is-external-link=\"true\" href=\"https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile\" rel=\"nofollow\">https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile</a></p>\n<p>\u200c</p>\n<p>It would be nice if this job used osrf/rocker, but that looks like a larger change. <a data-is-external-link=\"true\" href=\"https://github.com/osrf/rocker\" rel=\"nofollow\">https://github.com/osrf/rocker</a></p>\n<p>\u200c</p>", "type": "rendered"}, "title": {"raw": "Install libglvnd if using nvidia-docker2", "markup": "markdown", "html": "<p>Install libglvnd if using nvidia-docker2</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This solves an error \\` libGL error: failed to load driver: swrast\\` that only seems to happen on `drogon`. As far as I can tell, it looks like it has to do with drogon using `nvidia-docker2`. The nodes using `nvidia-docker` 1 work fine.\r\n\r\nFailing job:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1163/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console)\r\n\r\nSuccessful job with this PR:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1166/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console)\r\n\r\n\u200c\r\n\r\nThis PR installs `libglvnd` inside the docker image, which seems to be what the NVidia images do: [https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile](https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile)\r\n\r\n\u200c\r\n\r\nIt would be nice if this job used osrf/rocker, but that looks like a larger change. [https://github.com/osrf/rocker](https://github.com/osrf/rocker)\r\n\r\n\u200c", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/973/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/diffstat/osrf/release-tools:f5b6a9e7ebad%0D1be3883b459c?from_pullrequest_id=973"}, "commits": {"href": "data/repositories/osrf/release-tools/pullrequests/973/commits.json"}, "self": {"href": "data/repositories/osrf/release-tools/pullrequests/973.json"}, "comments": {"href": "data/repositories/osrf/release-tools/pullrequests/973/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/973/merge"}, "html": {"href": "#!/osrf/release-tools/pull-requests/973"}, "activity": {"href": "data/repositories/osrf/release-tools/pullrequests/973/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/diff/osrf/release-tools:f5b6a9e7ebad%0D1be3883b459c?from_pullrequest_id=973"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/pullrequests/973/approve"}, "statuses": {"href": "data/repositories/osrf/release-tools/pullrequests/973/statuses_page=1.json"}}, "title": "Install libglvnd if using nvidia-docker2", "close_source_branch": true, "reviewers": [{"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}], "id": 973, "destination": {"commit": {"hash": "1be3883b459c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/1be3883b459c.json"}, "html": {"href": "#!/osrf/release-tools/commits/1be3883b459c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "default"}}, "created_on": "2020-03-25T21:35:55.040474+00:00", "summary": {"raw": "This solves an error \\` libGL error: failed to load driver: swrast\\` that only seems to happen on `drogon`. As far as I can tell, it looks like it has to do with drogon using `nvidia-docker2`. The nodes using `nvidia-docker` 1 work fine.\r\n\r\nFailing job:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1163/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console)\r\n\r\nSuccessful job with this PR:\r\n\r\n[https://build.osrfoundation.org/job/gazebo-install-gazebo7\\_pkg-xenial-amd64/1166/console](https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console)\r\n\r\n\u200c\r\n\r\nThis PR installs `libglvnd` inside the docker image, which seems to be what the NVidia images do: [https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile](https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile)\r\n\r\n\u200c\r\n\r\nIt would be nice if this job used osrf/rocker, but that looks like a larger change. [https://github.com/osrf/rocker](https://github.com/osrf/rocker)\r\n\r\n\u200c", "markup": "markdown", "html": "<p>This solves an error ` libGL error: failed to load driver: swrast` that only seems to happen on <code>drogon</code>. As far as I can tell, it looks like it has to do with drogon using <code>nvidia-docker2</code>. The nodes using <code>nvidia-docker</code> 1 work fine.</p>\n<p>Failing job:</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console\" rel=\"nofollow\">https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1163/console</a></p>\n<p>Successful job with this PR:</p>\n<p><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console\" rel=\"nofollow\">https://build.osrfoundation.org/job/gazebo-install-gazebo7_pkg-xenial-amd64/1166/console</a></p>\n<p>\u200c</p>\n<p>This PR installs <code>libglvnd</code> inside the docker image, which seems to be what the NVidia images do: <a data-is-external-link=\"true\" href=\"https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile\" rel=\"nofollow\">https://gitlab.com/nvidia/container-images/opengl/-/blob/ubuntu16.04/glvnd/runtime/Dockerfile</a></p>\n<p>\u200c</p>\n<p>It would be nice if this job used osrf/rocker, but that looks like a larger change. <a data-is-external-link=\"true\" href=\"https://github.com/osrf/rocker\" rel=\"nofollow\">https://github.com/osrf/rocker</a></p>\n<p>\u200c</p>", "type": "rendered"}, "source": {"commit": {"hash": "5bfbdbbacdc2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/5bfbdbbacdc2.json"}, "html": {"href": "#!/osrf/release-tools/commits/5bfbdbbacdc2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "branch": {"name": "sloretz/nvidia_docker_2_opengl"}}, "comment_count": 14, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2020-03-26T00:22:58.037339+00:00", "type": "participant", "approved": true, "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}}, {"role": "PARTICIPANT", "participated_on": "2020-03-26T00:13:31.896311+00:00", "type": "participant", "approved": true, "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}}], "reason": "", "updated_on": "2020-03-26T00:23:05.930876+00:00", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "merge_commit": {"hash": "f5b6a9e7ebad", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/release-tools/commit/f5b6a9e7ebad.json"}, "html": {"href": "#!/osrf/release-tools/commits/f5b6a9e7ebad"}}}, "closed_by": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}}