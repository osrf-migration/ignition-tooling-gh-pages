{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/release-tools.json"}, "html": {"href": "#!/osrf/release-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{41811d3d-19d0-428e-a134-976595e72508}ts=python"}}, "type": "repository", "name": "release-tools", "full_name": "osrf/release-tools", "uuid": "{41811d3d-19d0-428e-a134-976595e72508}"}, "links": {"attachments": {"href": "data/repositories/osrf/release-tools/issues/123/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/release-tools/issues/123.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/issues/123/watch"}, "comments": {"href": "data/repositories/osrf/release-tools/issues/123/comments_page=1.json"}, "html": {"href": "#!/osrf/release-tools/issues/123/ign-msgs1-pre-release-issues"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/release-tools/issues/123/vote"}}, "reporter": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "title": "ign-msgs1 pre-release issues", "component": null, "votes": 0, "watches": 1, "content": {"raw": "@caguero and I were trying to install the ign-msgs1 pre-release on [ign-transport's pipelines](https://bitbucket.org/ignitionrobotics/ign-transport/branches/compare/pipelines_4%0Dign-transport4#diff) and we ran into a few issues.\r\n\r\nWe reproduced the setup locally with:\r\n\r\n~~~\r\ndocker run -ti ubuntu:16.04 /bin/bash\r\napt update\r\napt install -y mercurial\r\nhg clone https://bitbucket.org/ignitionrobotics/ign-transport -b pipelines_4\r\ncd ign-transport\r\n# follow pipelines instructions from here\r\n~~~\r\n\r\n> Note that we're installing `libignition-msgs-dev` instead of `libignition-msgs1-dev` because that's the package on the pre-release repo, is it supposed to be like that?\r\n\r\nThe problem happens when ign-transport fails to `find_package(ignition-msgs1)`. It does find it when ign-msgs1 is build from source, which indicates the problem is on the debs.\r\n\r\n> Note that  `find_package(ignition-msgs0)` fails and `find_package(ignition-msgs)` succeeds\r\n\r\nSome possibly useful output:\r\n\r\n~~~\r\n# dpkg -L libignition-msgs-dev | grep cmake\r\n/usr/lib/x86_64-linux-gnu/cmake\r\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs\r\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs/ignition-msgs-config.cmake\r\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs/ignition-msgs-targets-relwithdebinfo.cmake\r\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs/ignition-msgs-targets.cmake\r\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs/ignition-msgs-config-version.cmake\r\n~~~\r\n\r\n~~~\r\n# dpkg -L libignition-msgs | grep msgs\r\n/usr/lib/x86_64-linux-gnu/libignition-msgs.so.1.0.0\r\n/usr/share/doc/libignition-msgs\r\n/usr/share/doc/libignition-msgs/changelog.Debian.gz\r\n/usr/share/doc/libignition-msgs/copyright\r\n/usr/lib/x86_64-linux-gnu/libignition-msgs.so.1\r\n~~~\r\n\r\n~~~\r\n# ll /usr/include/ignition/     \r\ntotal 16\r\ndrwxr-xr-x  4 root root 4096 Nov 17 00:08 ./\r\ndrwxr-xr-x 35 root root 4096 Nov 17 00:08 ../\r\ndrwxr-xr-x  3 root root 4096 Nov 17 00:08 math3/\r\ndrwxr-xr-x  3 root root 4096 Nov 17 00:08 msgs1/\r\n~~~", "markup": "markdown", "html": "<p>@caguero and I were trying to install the ign-msgs1 pre-release on <a data-is-external-link=\"true\" href=\"https://bitbucket.org/ignitionrobotics/ign-transport/branches/compare/pipelines_4%0Dign-transport4#diff\" rel=\"nofollow\">ign-transport's pipelines</a> and we ran into a few issues.</p>\n<p>We reproduced the setup locally with:</p>\n<div class=\"codehilite\"><pre><span></span>docker run -ti ubuntu:16.04 /bin/bash\napt update\napt install -y mercurial\nhg clone https://bitbucket.org/ignitionrobotics/ign-transport -b pipelines_4\ncd ign-transport\n# follow pipelines instructions from here\n</pre></div>\n\n\n<blockquote>\n<p>Note that we're installing <code>libignition-msgs-dev</code> instead of <code>libignition-msgs1-dev</code> because that's the package on the pre-release repo, is it supposed to be like that?</p>\n</blockquote>\n<p>The problem happens when ign-transport fails to <code>find_package(ignition-msgs1)</code>. It does find it when ign-msgs1 is build from source, which indicates the problem is on the debs.</p>\n<blockquote>\n<p>Note that  <code>find_package(ignition-msgs0)</code> fails and <code>find_package(ignition-msgs)</code> succeeds</p>\n</blockquote>\n<p>Some possibly useful output:</p>\n<div class=\"codehilite\"><pre><span></span># dpkg -L libignition-msgs-dev | grep cmake\n/usr/lib/x86_64-linux-gnu/cmake\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs/ignition-msgs-config.cmake\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs/ignition-msgs-targets-relwithdebinfo.cmake\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs/ignition-msgs-targets.cmake\n/usr/lib/x86_64-linux-gnu/cmake/ignition-msgs/ignition-msgs-config-version.cmake\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span># dpkg -L libignition-msgs | grep msgs\n/usr/lib/x86_64-linux-gnu/libignition-msgs.so.1.0.0\n/usr/share/doc/libignition-msgs\n/usr/share/doc/libignition-msgs/changelog.Debian.gz\n/usr/share/doc/libignition-msgs/copyright\n/usr/lib/x86_64-linux-gnu/libignition-msgs.so.1\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span># ll /usr/include/ignition/     \ntotal 16\ndrwxr-xr-x  4 root root 4096 Nov 17 00:08 ./\ndrwxr-xr-x 35 root root 4096 Nov 17 00:08 ../\ndrwxr-xr-x  3 root root 4096 Nov 17 00:08 math3/\ndrwxr-xr-x  3 root root 4096 Nov 17 00:08 msgs1/\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-11-17T00:39:45.838623+00:00", "milestone": null, "updated_on": "2017-11-30T19:48:12.405723+00:00", "type": "issue", "id": 123}